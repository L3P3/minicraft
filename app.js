const u=lui,aa=u.hook_assert,x=u.hook_dom,A=u.hook_effect,ba=u.hook_memo,ca=u.hook_model,da=u.hook_rerender,D=u.hook_static,E=u.node,I=u.node_dom,ea=u.node_map,fa=u.now,ha=[0,8487297,4305266,4349313,8092539,5342114,7039851,3561583,4172910,6384533,15526888,10671324,8092798,16447200,4151672,1970708,8092539,9686227,9126695,15198183,5567485,14541182,7920469,662956,14936813],oa=ha.length,pa="WEBTSN".split(""),qa=window,ra=document,J=Math,xa=J.PI,ya=.5*xa,za=180/xa,K=J.floor,Aa=J.ceil,Ba=J.round,L=J.min,
M=J.max,Ca=J.cos,Da=J.sin,Ea=J.sqrt,Ja=String.fromCharCode,Ka=JSON,La=localStorage,Ma=Uint8Array,Na=Uint32Array,Oa=Map,Pa=Number,Qa=setTimeout,Ra=setInterval,Sa=clearTimeout,Ta=clearInterval,P=a=>a*a,Ua=()=>!1,Va=a=>{a+=32;33<a&&39>a?a++:38<a&&44>a?a+=2:43<a&&127>a?a+=3:126<a&&55258>a?a+=37:55295<a&&(a+=8485);return Ja(a)},Wa=a=>a-(63743<a?8517:159<a?69:46<a&&130>a?35:40<a&&46>a?34:34<a&&40>a?33:32),Ya=()=>{var a=Xa;const c=a.length,e=new Oa,b=r=>{t=t<<1|r&1;15===++n&&(k+=Va(t),t=n=0)},d=()=>{for(let r=
0;r<m;++r)b(0)},h=r=>{b(r);b(r>>1);b(r>>2);b(r>>3);b(r>>4);b(r>>5);b(r>>6);b(r>>7)},l=()=>{0===--v&&(v=1<<m++)},g=()=>{if(y)y=!1;else{let r=q.id;for(let B=0;B<m;B++)b(r>>B)}};let f=a[0],k="",t=0,n=2,m=2,v=2,w=2,q={id:w++,qa:new Oa},y=!0;h(f);e.set(f,q);for(let r=1;r<c;++r){const B=q.qa.get(f=a[r]);B?q=B:(g(),e.has(f)||(l(),d(),h(f),e.set(f,{id:w++,qa:new Oa}),y=!0),q.qa.set(f,{id:w++,qa:new Oa}),q=e.get(f),l())}g();e.has(f)||(l(),d(),h(f));l();b(1);--m;d();return k+=Va(t<<15-n)},Za=a=>{var c=Xa;if(!a)return null;
const e=a.length,b=()=>{n+=(w>>--q&1)<<m++;0===q&&(q=15,w=Wa(a.charCodeAt(v++)))};let d=[0,1],h=1,l=3,g=2,f=null;var k=null;let t=0,n=0;k=2;let m=0,v=0,w=Wa(a.charCodeAt(v++)),q=15;for(;m<k;)b();if(1===n)return null;for(n=m=0;8>m;)b();f=[n];d[2]=f;for(c[t++]=n;v<=e;){k=g;for(n=m=0;m<k;)b();if(0===n){for(n=m=0;8>m;)b();d[l]=[n];n=l++;0===--h&&(h=1<<g++)}else if(1===n)return c;k=n<d.length?d[n]:f.concat(f[0]);for(let y=0;y<k.length;y++)c[t++]=k[y];d[l++]=f.concat(k[0]);f=k;0===--h&&(h=1<<g++)}return null},
Q=new Na(1024),Xa=new Ma(Q.buffer),$a=new Oa,ab=(a,c,e,b)=>0>e||63<e?0:a.X[(c<<a.u+4|b)<<6|e],bb=(a,c,e,b,d)=>{const h=a.u;a.X[(c<<h+4|b)<<6|e]=d;a.N[(c>>4<<h|b>>4)<<2|e>>4].Y=!0},eb=(a,c,e)=>{const b=M(L(c.B,63),0)>>4,d=K(c.A)>>4;c=K(c.G)>>4;if(e||a.ua!==b||a.ia+a.ta!==d||a.ja+a.va!==c)e=1<<a.u,a.ua=b,a.ia=d-(a.ta=(65536+d)%e),a.ja=c-(a.va=(65536+c)%e),cb(a);db(a)},cb=a=>{const c=a.ta,e=a.ua,b=a.va,d=a.u,h=`${d} ${c} ${b} ${e}`;let l=$a.get(h);if(null==l){const g=1<<d,f=P(.5*g);$a.set(h,l=a.N.map(({x:k,
y:t,z:n},m)=>{let v=P(k-c),w=P(n-b),q=P(k-c-g),y=0,r=0;q<v&&(v=q,y=-g);(q=P(k-c+g))<v&&(v=q,y=g);(q=P(n-b-g))<w&&(w=q,r=-g);(q=P(n-b+g))<w&&(w=q,r=g);return{Ea:v+w+P(t-e),Na:m,ia:y,ja:r}}).filter(({Ea:k})=>k<=f).sort((k,t)=>k.Ea-t.Ea))}a.ra=l;a.fa=0},gb=a=>{for(const c of a.N)c.Y&&fb(a,c)},hb=(a,c,e,b)=>`minicraft.world.${a.id}:${c}/${e}`+(0<b?"/"+b:""),fb=(a,c)=>{const e=a.pa;var b=a.u;const d=c.y,h=(256<<b)-256;for(let l=0,g=-1,f=((c.x<<b+4|c.z)<<6|d)<<2;16>l;++l){for(b=0;16>b;++b)Q[++g]=e[f],Q[++g]=
e[++f],Q[++g]=e[++f],Q[++g]=e[++f],f+=13;f+=h}La.setItem(hb(a,c.ma,c.za,d),Ya());c.Y=!1},db=a=>{var c=a.N,e=a.ra,b=a.ia;const d=a.ja,h=e.length;for(;a.fa<h;){var l=e[a.fa++];const m=c[l.Na];var g=m.loaded,f=m.x,k=m.y,t=m.z;const v=b+l.ia+f;l=d+l.ja+t;if(!g||v!==m.ma||l!==m.za){m.Y&&fb(a,m);m.loaded=!0;var n=Za(La.getItem(hb(a,m.ma=v,m.za=l,k)));if(g||0===k||n){c=a.pa;b=a.u;e=(256<<b)-256;f=((f<<b+4|t)<<6|k)<<2;if(n)for(let w=0,q=-1;16>w;++w){for(g=0;16>g;++g)c[f]=Q[++q],c[++f]=Q[++q],c[++f]=Q[++q],
c[++f]=Q[++q],f+=13;f+=e}else for(t=0;16>t;++t){for(n=0;16>n;++n)c[f]=0<k?0:50397446,c[++f]=0<k?0:131843,g?(c[++f]=0,c[++f]=0,f+=13):f+=15;f+=e}if(0===(v|l|k)){for(k=1;k<oa;++k)bb(a,k%9,7,K(k/9),k);m.Y=!1}break}}}};let ib=null,jb=new Image;jb.crossOrigin="anonymous";jb.onload=()=>{var a=ra.createElement("canvas");a.width=256;a.height=26;a=a.getContext("2d");a.drawImage(jb,0,0);jb=null;ib=new Na(a.getImageData(0,0,256,26).data.buffer)};jb.src=ASSETS+"blocks.png";
const wb=(a,c)=>{const e={La:c,Ca:c.getContext("2d",{alpha:!1,desynchronized:!0}),Ma:null,Qa:"",O:!1,Ra:0,Fa:0,ab:Ra(()=>(e.Ra=e.Fa,e.Fa=0),1E3),j:a};vb(e);return e},vb=a=>{(a.Ma=a.Ca.createImageData(a.La.width=a.j.xa,a.La.height=a.j.ya)).data.fill(255);a.Ca.fillStyle="rgba(255,255,255,.5)"},xb=Array(16).fill(0),yb=({id:a})=>(x("div[className=bitmap]"),--a,xb.map((c,e)=>I("div",null,xb.map((b,d)=>{b=ib[a<<8|15-e<<4|d];return I("div",{style:0<b>>>24?`background-color:rgb(${b&255},${b>>>8&255},${b>>>
16&255})`:""})}))));function zb({amount:a,id:c}){x("div[className=stack]");aa(null!==ib);return[E(yb,{id:c}),1<a&&I("div[className=amount]",{innerText:a})]}function Ab({g:a,ka:c}){x("div[className=bar]",{ontouchstart:D(e=>{a.l=Number(e.target.closest("[data-slot]").dataset.slot);a.$=e.timeStamp}),S:{opacity:M(.5,L(1,1-5E-4*(c-a.$-5E3)))}});return a.v.map((e,b)=>I("div",{D:{slot:b},F:{active:b===a.l}},[null!==e&&E(zb,Object.assign({},e))]))}
const Bb=({I:{Ta:a,time:c,value:e},ka:b})=>(x(a?"div[className=minor]":"div",{innerText:e,S:{opacity:L(1,1-.001*(b-c-4500))}}),null);function Cb({K:a,ka:c}){x("div[className=messages]");const e=c-5E3;return[ea(Bb,a.slice(-10).filter(b=>b.time>e),{ka:c})]}
const Db=(a,c,e)=>{a.L=(a.L+c+100*xa)%(2*xa);a.na=M(-ya,L(ya,a.na+e))},Eb=({v:a},c)=>{for(var e of a)if(null!==e&&e.id===c.id){const b=L(e.amount+c.amount,64);c.amount-=b-e.amount;e.amount=b;if(0===c.amount)return null}for(e=0;9>e;++e)if(null===a[e])return a[e]=c,null;return c},Fb=(a,c=1)=>({amount:c,data:null,id:a});let Gb=0;
const Hb=()=>{const a={X:null,pa:null,N:null,ra:null,fa:0,ta:0,ua:0,va:0,id:0,ia:0,ja:0,u:0,Wa:.5,Xa:8.5,Ya:.5};var c=new Set,e={Aa:0,Ka:0,Ba:0,L:0,na:0,oa:0,V:0,M:-1,W:0,da:null,ea:null,H:1,v:Array(9).fill(null),wa:0,name:"Gast",A:a.Wa,B:a.Xa,G:a.Ya,Ua:0,Va:0,l:0,$:0,aa:0,ba:0,ca:0};return{actions:null,o:null,sa:!1,h:!0,ga:!1,Sa:null,P:0,J:c,Ga:"",i:0,K:[],g:e,s:null,Ha:1,Ia:1,xa:0,ya:0,Za:null,time:0,Ja:0,m:a}},Ib=(a,c)=>{a.s=wb(a,c);a.Za=Ra(()=>{a.h||(a.time=(a.time+1)%24E3,a.Ja=1/24E3*(a.time+
6E3)%1,eb(a.m,a.g,!1))},50)},Jb=(a,c)=>a===c?0:.1-.2*a,Kb=a=>{a.g.Aa=Jb((a=a.J).has(-12)||a.has(65),a.has(-13)||a.has(68))},Lb=a=>{a.g.Ka=Jb((a=a.J).has(-15)||a.has(16),a.has(-14)||a.has(32))},Mb=a=>{a.g.Ba=Jb((a=a.J).has(-11)||a.has(83),a.has(-10)||a.has(87))},Nb=a=>{a.g.Ua=Jb(a.J.has(-18),a.J.has(-19))},Ob=a=>{a.g.Va=Jb(a.J.has(-17),a.J.has(-16))},S=(a,c,e)=>{const b=a.J,d=a.g;if(e){if(b.has(c))return!1;b.add(c);var h=d.V,l=d.M;e=d.W;switch(c){case -18:case -19:Nb(a);break;case -17:case -16:Ob(a);
break;case -1:2!==d.H&&0<=l&&(0===d.wa?0===d.H&&(c=ab(a.m,h,l,e),2===c?c=3:1===c&&(c=4),6===c||8!==c&&13!==c&&null!==Eb(d,Fb(c,1)))||bb(a.m,h,l,e,0):Pb(a,[h,l,e],!1));break;case -2:case 71:if(0<=l){const g=ab(a.m,h,l,e);e=d.v.slice(0,9);l=e.findIndex(f=>null!==f&&f.id===g);0<=l?d.l=l:1===d.H&&(null!==e[d.l]&&(e=e.indexOf(null),0<=e&&(d.l=e)),d.v[d.l]=Fb(g));d.$=a.P}break;case -3:if(2!==d.H&&0<=l)if(0===d.wa){if(c=d.v[d.l],null!==c){switch(d.oa){case 0:--h;break;case 1:++h;break;case 2:--l;break;case 3:++l;
break;case 4:--e;break;default:++e}0<=l&&64>l&&(bb(a.m,h&(1<<4+a.m.u)-1,l,e&(1<<4+a.m.u)-1,c.id),1!==d.H&&0>=--c.amount&&(d.v[d.l]=null))}}else Pb(a,[h,l,e],!0);break;case -4:d.l=(d.l+9-1)%9;d.$=a.P;break;case -5:d.l=(d.l+1)%9;d.$=a.P;break;case 27:a.i?(a.h=!1,a.i=0):(a.h=!0,a.i=1);break;case -15:case -14:case 16:case 32:Lb(a);break;case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:d.l=c-49;d.$=a.P;break;case -12:case -13:case 65:case 68:Kb(a);break;case 80:a.h=!a.h;break;case 81:if(b.has(17)||
null!==d.v[d.l]&&0>=--d.v[d.l].amount)d.v[d.l]=null;break;case -11:case -10:case 83:case 87:Mb(a);break;case 84:if(!a.i){a.i=2;for(const g of b)S(a,g,!1)}break;case 114:a.sa=!a.sa;break;default:return!1}}else{if(!b.delete(c))return!1;switch(c){case -15:case -14:case 16:case 32:Lb(a);break;case -12:case -13:case 65:case 68:Kb(a);break;case -11:case -10:case 83:case 87:Mb(a);break;case -18:case -19:Nb(a);break;case -17:case -16:Ob(a)}}a.Ga=[...b].join();return!0},Qb=(a,c)=>(c=c.startsWith("~")?a+Pa(c.substr(1)):
Pa(c),isNaN(c)?a:c),T=(a,c,e=!1)=>{(a.K=a.K.slice(-49)).push({id:++Gb,Ta:e,time:fa(),value:c})},Pb=(a,c,e)=>{e?a.g.ea=c:a.g.da=c;T(a,`${e?"second":"first"} position: ${c.join(" ")}`,!0)};
function Rb({actions:{$a:a,Da:c,Pa:e},o:b,j:d}){A(()=>{gb(d.m);return c});A(()=>{const h=Qa(c,1E3);return()=>Sa(h)},[b]);x("div[className=menu]");return[I("h1[innerText=Men\u00fc]"),I("div[className=settings]",null,[I("button",{innerText:"Oberfl\u00e4chen: "+(b.Z?"Texturiert":"Einfarbig"),onclick:D(()=>a(h=>({Z:!h.Z})))}),I("label[innerText=Aufl\u00f6sung:]",null,[I("input[type=range][min=1][max=100][step=1]",{value:101-b.T,onchange:D(h=>e({T:101-Number(h.target.value)}))})]),I("label[innerText=Blickwinkel:]",
null,[I("input[type=range][min=1][max=180][step=1]",{value:b.la,onchange:D(h=>e({la:Number(h.target.value)}))})]),I("label[innerText=Sichtweite:]",null,[I("input[type=range][min=1][max=128][step=1]",{value:b.U,onchange:D(h=>e({U:Number(h.target.value)}))})]),I("label[innerText=Mausempfindlichkeit:]",null,[I("input[type=range][min=1][max=15][step=1]",{value:b.ha,onchange:D(h=>e({ha:Number(h.target.value)}))})])]),I("center",null,[I("button[innerText=Zur\u00fcck]",{onclick:D(h=>(d.i=0,"mouse"===h.pointerType?
d.Sa.requestPointerLock():d.h=!1))})])]}const Sb=({I:{Ta:a,value:c}})=>(x(a?"div[className=minor]":"div",{innerText:c}),null);
function Tb({j:a,K:c}){x("div[className=menu terminal]");const e=D({history:null});A(b=>{b&&Qa(()=>e.history.scrollTop=1E9,0)},[c.length&&c[c.length-1].id]);return[I("div[className=history]",{R:D(b=>{e.history=b})},[ea(Sb,c)]),I("input[enterkeyhint=send][mozactionhint=send][name=message][required]",D({onkeydown:b=>{var d=b.keyCode;b=b.target;if(13===d){var h=b.value;d=a.g;if(h)if("/"===h.charAt(0)){h=h.substr(1).split(" ");var l=h.shift();switch(l){case "clear":a.K=[];break;case "clearinv":d.v.fill(null);
T(a,"inventory cleared",!0);break;case "exit":a.h=!1;a.i=0;break;case "gamemode":case "gm":h=Pa(h[0]);!isNaN(h)&&0<=h&&3>h&&0===h%1?(d.H=h,T(a,`gamemode set to ${h}`,!0)):T(a,"gamemode must be in 0..2");break;case "give":l=Pa(h[0]);h=Pa(h[1]||1);!isNaN(l)&&0<l&&25>l&&0===l%1?!isNaN(h)&&0<h&&65>h&&0===h%1?T(a,Eb(d,Fb(l,h))?"inventory full":"items given",!0):T(a,"amount must be in 1..64"):T(a,"invalid block type");break;case "help":T(a,"commands: clear, clearinv, exit, gamemode, give, help, me, save, spawn, teleport, version");
break;case "me":T(a,d.name+" "+h.join(" "),!0);break;case "save":gb(a.m);a.actions.Da();T(a,"world+config saved",!0);break;case "smart":d.name="LFF5644";T(a,"lff.smart: true",!0);break;case "spawn":d.A=a.m.Wa;d.B=a.m.Xa;d.G=a.m.Ya;a.s.O=!0;break;case "teleport":case "tp":3===h.length?(T(a,`teleported to ${d.A=Qb(d.A,h[0])} ${d.B=Qb(d.B,h[1])} ${d.G=Qb(d.G,h[2])}`,!0),a.s.O=!0):T(a,"PITCH");break;case "version":T(a,"Minicraft 0.5.14");break;case "/exit":d.wa=0;T(a,"normal mouse mode",!0);break;case "/expand":a.g.da&&
a.g.ea?l=!0:(T(a,"selection required"),l=!1);l&&("vert"===h[0]?(d.da[1]=0,d.ea[1]=63,T(a,"selection expanded",!0)):T(a,"only vert supported"));break;case "/pos1":case "/pos2":Pb(a,[K(d.A),K(d.B),K(d.G)],"/pos2"===l);break;case "/regen":d=a.m;h=d.N[d.ra[d.fa=0].Na];La.removeItem(hb(d,h.ma,h.za,h.y));h.Y=!1;++h.ma;db(d);T(a,"regenerate chunk",!0);a.s.O=!0;break;case "/show":T(a,`first: ${d.da?d.da.join(" "):"none"}, second: ${d.ea?d.ea.join(" "):"none"}`);break;case "/wand":d.wa=1;T(a,"primary+secondary button for selection",
!0);break;default:T(a,"unknown command: "+l)}}else T(a,`<${d.name}> `+h);b.value=""}else 27===d&&(a.h=!1,a.i=0)},R:b=>Qa(()=>b.focus(),0)}))]}const Ub=[["pick",-2],["up",-14],["down",-15],["T",84],["F3",114],["...",27]],Vb=[["up",-10],["down",-11],["left",-12],["right",-13],["center",-1]],Wb=[["up",-16],["down",-17],["left",-18],["right",-19],["center",-3]];
function Xb({j:a}){const c=a.J,e=([b,d])=>I("div",{D:{code:d},F:{button:!0,[b]:!0,active:c.has(d)}});x("div[className=touch]",D({ontouchstart:b=>{b.preventDefault();const d=Number(b.target.dataset.code);if(null!=d&&S(a,d,!0)){const h=b.changedTouches[0].identifier,l=g=>{g.changedTouches[0].identifier===h&&(removeEventListener("touchend",l),S(a,d,!1))};addEventListener("touchend",l)}}}));return[I("div[className=top]",null,Ub.map(([b,d])=>I(`div[innerText=${b}]`,{D:{code:d},F:{button:!0,active:c.has(d)}}))),
I("div[className=move]",null,Vb.map(e)),I("div[className=move sec]",null,Wb.map(e))]}
function Yb({actions:a,o:c,bb:e}){const b=ba(Hb),d=fa(),h=x("div[className=game]",ba(()=>{const g=f=>0!==b.i||(b.ga=!1,ra.pointerLockElement===h?b.h||S(b,-1-f.button,"mousedown"===f.type):b.Sa.requestPointerLock(),f.preventDefault(),!1);return{onmousedown:g,onmousemove:f=>{if(!b.h&&!b.i){const k=b.o.ha*xa/M(b.Ha,b.Ia);Db(b.g,f.movementX*k,-f.movementY*k)}},onmouseup:g,ontouchstart:f=>{b.ga=!0;b.i||(b.h=!1,f.preventDefault())},onwheel:f=>{b.ga=!1;if(!b.i&&!b.h&&5<Math.abs(f.deltaY)){const k=0<f.deltaY?
-5:-4;S(b,k,!0);S(b,k,!1);f.preventDefault()}}}})),l=ra.pointerLockElement===h;A(()=>(b.actions=a,b.Sa=h,e.j=b,()=>{Ta(b.Za);Ta(b.s.ab);return e.j=null}));A(()=>{b.o=c;b.s&&(b.s.O=!0);const g=b.g,f=b.m;var k=b.o.U;k=17>k?2:49>k?3:113>k?4:241>k?5:497>k?6:1009>k?7:2033>k?8:4081>k?9:8177>k?10:16369>k?11:32753>k?12:13;if(f.u!==k){f.N&&gb(f);const t=1<<(f.u=k),n=f.N=[];for(let m=0;m<t;++m)for(let v=0;v<t;++v)for(let w=0;4>w;++w)n.push({Y:!1,loaded:!1,x:m,y:w,z:v,ma:0,za:0});k=t<<k+12+2;null===f.X||f.X.length<
k?f.pa=new Na((f.X=new Ma(k)).buffer):f.pa.fill(0);eb(f,g,!0)}},[c]);A((g,f,k)=>{b.Ha=M(1,g*k);b.Ia=M(1,f*k);f=b.o.T;g=M(1,Ba(b.Ha/f));f=M(1,Ba(b.Ia/f));if(g!==b.xa||f!==b.ya)b.xa=g,b.ya=f,b.s&&(b.s.O=!0,vb(b.s))},[h.offsetWidth,h.offsetHeight,qa.devicePixelRatio||1,c.T]);A(()=>{l||b.h||b.i||(b.i=1);b.h=!l},[l]);A(g=>l&&g&&ra.exitPointerLock(),[b.h||b.i]);A(()=>{if(b.P&&!b.h){var g=b.g,f=L(5,.01*(d-b.P));g.aa-=.1*g.aa*f;g.ba-=.1*g.ba*f;g.ca-=.1*g.ca*f;g.aa+=(Ca(g.L)*g.Aa+Da(g.L)*g.Ba)*f;g.ba+=g.Ka*
f;g.ca+=(-Da(g.L)*g.Aa+Ca(g.L)*g.Ba)*f;Db(g,g.Ua*f,g.Va*f);g.A+=g.aa*f;g.B+=g.ba*f;g.G+=g.ca*f}if(b.s){g=b.s;++g.Fa;f=g.Ca;var k=g.Ma;const H=g.j,ia=H.o,p=H.g,N=H.xa,R=H.ya,O=H.m;if(!H.h||g.O){g.O=!1;const X=k.data,$b=ia.U;var t=p.L,n=p.na;const ac=p.V,bc=p.M,cc=p.W;var m=p.A,v=p.B,w=p.G;const dc=O.X;var q=O.u;const ec=ia.Z&&null!==ib;var y=1/N,r=1/R;const Y=N>>1,Z=R>>1,kb=L(N,R),lb=32<kb,mb=Ca(t);t=Da(t);const nb=Ca(-n);n=Da(-n);var B=ia.la/45;const fc=y*(N<R?B*N*r:B);y=r*(R<N?B*R*y:B);m+=65536;
v+=65536;w+=65536;r=m%1;B=v%1;const gc=w%1;q=4+q;const ob=(1<<q)-1;let pb=1===p.H?6:4,U=p.V=p.W=p.oa=0;p.M=-1;for(let sa=0;sa<R;++sa){var ta=(Z-sa)*y;const qb=ta*nb-n;var Fa=ta*n+nb;ta=Fa*t;Fa*=mb;for(let ua=0;ua<N;++ua){var ja=(ua-Y)*fc;const rb=ta+mb*ja;ja=Fa-t*ja;let ka=16757124,va=1,sb=$b;for(let z=0;3>z;++z){let F=ja;0===z&&(F=rb);1===z&&(F=qb);var V=1/(0>F?-F:F);const wa=rb*V,W=qb*V;V*=ja;const tb=Ea(wa*wa+W*W+V*V);var C=gc;0===z&&(C=r);1===z&&(C=B);0<F&&(C=1-C);let la=m+wa*C-(0===z&0>F|0),
ma=v+W*C-(1===z&0>F|0),na=w+V*C-(2===z&0>F|0);C*=tb;for(let Ga,Ha,Ia,G;C<sb;la+=wa,ma+=W,na+=V,C+=tb)if(65536>ma){if(0>W)break}else if(65600<=ma){if(0<W)break}else if(0!==(G=dc[((Ga=la&ob)<<q|(Ia=na&ob))<<6|(Ha=ma&63)])){sa===Z&&ua===Y&&C<=pb&&(p.V=Ga,p.M=Ha,p.W=Ia,p.oa=0>F|z<<1,pb=C);if(ec){--G;1===z?6===G?G=25:13===G?G=4:1===G&&0<W&&(G=2):1===G&&(G=24);const ub=ib[G<<8|(16*(1===z?na:ma)&15)<<4|16*(1===z?la:(0<F?la-na:na-la)+65536)&15];if(0===ub>>>24)continue;ka=ub&16777215}else ka=ha[G];sb=C;va=
(0===z?.8:2===z?.6:0<F?.4:1)+(Ha!==bc||Ga!==ac||Ia!==cc?0:.2);break}}X[U]=(ka&255)*va;X[++U]=(ka>>8&255)*va;X[++U]=(ka>>16)*va;U+=2}}lb||(X[U=N*Z+Y<<2]+=128,X[++U]+=128,X[++U]+=128);f.putImageData(k,0,0);lb&&(k=Aa(.05*kb),f.fillRect(Y-k,Z-1,k<<1,2),f.fillRect(Y-1,Z-k,2,k-1),f.fillRect(Y-1,Z+1,2,k-1))}g.Qa=H.sa?"Minicraft 0.5.14 "+K(g.Ra).toString().padStart(2,"\u00a0")+" fps, T: "+K(24*H.Ja).toString().padStart(2,"0")+":"+K(24*H.Ja%1*60).toString().padStart(2,"0")+"; "+(H.h&&500>d%1E3?"":H.time)+
"\nR: "+N+"x"+R+" (x"+ia.T+"), D: "+ia.U+", C: "+O.fa+"/"+O.ra.length+", M: "+(64*P(1<<4+O.u)>>10)+"k\nE: 0/0 M: "+p.H+"\n\nPosition: "+p.A.toFixed(2)+" "+p.B.toFixed(2)+" "+p.G.toFixed(2)+"\nAngle: "+(p.L*za).toFixed(2)+" "+(p.na*za).toFixed(2)+"\nBlock: "+(0>p.M?0:p.V+" "+p.M+" "+p.W+" "+pa[p.oa]+": "+ab(O,p.V,p.M,p.W))+"\nChunk abs: "+(K(p.A)>>4)+" "+(K(p.G)>>4)+" "+(K(p.B)>>4)+" rel: "+O.ta+" "+O.va+" "+O.ua:""}b.P=d},[d]);da();return[I("canvas",{R:D(g=>Ib(b,g))}),2!==b.i&&E(Cb,{K:b.K,ka:d}),
b.s&&b.sa&&I("div[className=diagnostics]",{innerText:b.s.Qa}),b.ga&&E(Xb,{j:b,Ga:b.Ga}),2!==b.g.H&&E(Ab,{g:b.g,ka:d}),1===b.i&&E(Rb,{actions:a,o:c,j:b}),2===b.i&&E(Tb,{j:b,K:b.K})]}
const Zb={init:()=>{const a={Z:!0,ha:3,T:10,la:80,U:64};var c=La.getItem("minicraft.config");if(c){c=Ka.parse(c);let e=c.flag_textures;null!=e&&(a.Z=e);null!=(e=c.mouse_sensitivity)&&(a.ha=e);a.T=c.resolution_scaling;a.la=c.view_angle;a.U=c.view_distance}return{o:a,Oa:a}},Da:a=>{const c=a.o;if(c===a.Oa)return a;La.setItem("minicraft.config",Ka.stringify({version:"0.5.14",flag_textures:c.Z,mouse_sensitivity:c.ha,resolution_scaling:c.T,view_angle:c.la,view_distance:c.U}));return Object.assign({},a,
{Oa:c})},$a:(a,c)=>Zb.Pa(a,c(a.o)),Pa:(a,c)=>Object.assign({},a,{o:Object.assign({},a.o,c)})};u.init(()=>{const [a,c]=ca(Zb),e=D({j:null});A(()=>{let d=!1;onbeforeunload=onunload=()=>{d||(d=!0,c.Da(),e.j&&gb(e.j.m))}});const b=D(d=>"INPUT"===d.target.tagName||!e.j||(d.preventDefault(),S(e.j,d.keyCode,"keydown"===d.type),e.j.ga=!1));return[{onkeydown:b,onkeyup:b,oncontextmenu:Ua,ondragstart:Ua},[E(Yb,{actions:c,o:a.o,bb:e})]]});
