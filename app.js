const k=lui,m=k.hook_dom,p=k.hook_effect,B=k.hook_memo,aa=k.hook_rerender,C=k.hook_static,F=k.node,K=k.node_dom,ba=k.now;const ca=[0,7960953,8370002,7885881,8553090,9927501,4539717,6311215,3113506,12094592,14145495];const ea=()=>{const a={K:da(),ja:8,ka:32,la:8};for(let d=0;16>d;d+=2)a.K[L(d,4,0)]=3,a.K[L(0,4,d)]=3;["X   XXX XXX XXX","X     X X X   X","X   XXX XXX XXX","X     X X     X","XXX XXX X   XXX"].forEach((d,b,c)=>{b=c.length-b;d.split("").forEach((f,e)=>{"X"===f&&(a.K[L(e+1,4,b)]=6)})});return a},L=(a,d,b)=>((d|0)<<8)+((a-(0>a)&15)<<4)+(b-(0>b)&15),da=()=>{const a=new Uint8Array(16384),d=[6,3,3,3,2];for(let b=-1,c=0;c<d.length;++c){const f=d[c];for(let e=0;16>e;++e)for(let g=0;16>g;++g)a[++b]=f}return a};const fa=(a,d)=>{const b={canvas:d,aa:null,ba:null,ca:"",v:!1,N:0,W:0,ea:setInterval(()=>{b.N=b.W;b.W=0},1E3),j:a};M(b);return b},M=a=>{var d=a.canvas.width=a.j.A,b=a.canvas.height=a.j.B;a=(a.ba=(a.aa=a.canvas.getContext("2d")).createImageData(d,b)).data;d=a.length;for(b=3;b<d;b+=4)a[b]=255};const ha=()=>({u:!1,L:!1,M:!1,l:!1,h:{o:0,J:0,s:0,O:8,P:30,T:8,D:0,G:0,H:0,m:0,V:0},g:null,i:10,X:0,Y:0,A:0,B:0,da:null,time:0,Z:0,$:80,U:64,ga:ea()}),ia=(a,d)=>{a.g=fa(a,d);a.da=setInterval(()=>{if(!a.l){a.time=(a.time+1)%24E3;a.Z=1/24E3*(a.time+6E3)%1;var b=a.h;b.D*=.8;b.G*=.8;b.H*=.8;b.D+=Math.cos(b.m)*b.o+Math.sin(b.m)*b.s;b.G+=b.J;b.H+=-Math.sin(b.m)*b.o+Math.cos(b.m)*b.s;b.O+=b.D;b.P+=b.G;b.T+=b.H;a.u&&a.g&&0===a.time%10&&(100>a.i&&20>a.g.N?(a.i+=1,Z(a)):1<a.i&&40<a.g.N&&(--a.i,Z(a)))}},50)},
Z=a=>{const d=Math.max(1,Math.round(a.X/a.i)),b=Math.max(1,Math.round(a.Y/a.i));if(d!==a.A||b!==a.B)a.A=d,a.B=b,a.g&&(a.g.v=!0,M(a.g))};function ja({j:a}){m("div[className=menu]");return[K("h1[innerText=Menü]"),K("div[className=settings]",null,[K("button",{innerText:`Bildskalierung: ${a.u?"Dynamisch":"Statisch"}`,onclick:C(()=>{a.u=!a.u})}),K("label[innerText=Skalierung:]",null,[K("input[type=range][min=1][max=100][step=1]",{value:101-a.i,onchange:C(d=>{a.i=101-Number(d.target.value);Z(a)})})]),K("label[innerText=Blickwinkel:]",null,[K("input[type=range][min=1][max=180][step=1]",{value:a.$,onchange:C(d=>{a.$=Number(d.target.value);
a.g.v=!0})})]),K("label[innerText=Sichtweite:]",null,[K("input[type=range][min=1][max=128][step=1]",{value:a.U,onchange:C(d=>{a.U=Number(d.target.value);a.g.v=!0})})])]),K("div",null,[K("button[innerText=Zurück]",{onclick:C(()=>{a.l=a.M=!1})})])]};function ka({fa:a}){const d=m("div[className=game]"),b=B(ha);p(()=>{a.j=b;onmousemove=c=>{b.l||(b.h.m=2*(c.clientX/b.X-.5)*Math.PI,b.h.V=(.5-c.clientY/b.Y)*Math.PI)};return()=>{clearInterval(b.da);clearInterval(b.g.ea);onmousemove=null;a.j=null}});p((c,f)=>{b.X=c;b.Y=f;Z(b)},[d.offsetWidth,d.offsetHeight]);p(c=>{if(b.g){var f=b.g;++f.W;const N=f.ba;var e=f.j,g=e.h;const la=e.ga;f.ca=e.L?`Minicraft ${"0.1.3"}
${f.N.toString().padStart(2," ")} fps, T: ${Math.floor(24*e.Z).toString().padStart(2,"0")}:${Math.floor(24*e.Z%1*60).toString().padStart(2,"0")}; ${e.l&&500>c%1E3?"":e.time}
R: ${e.A}x${e.B} (x${e.i}), C: 1, D: ${e.U}
E: 0/0

Position: ${g.O.toFixed(2)} ${g.P.toFixed(2)} ${g.T.toFixed(2)}
Angle: ${(180*g.m/Math.PI).toFixed(2)} ${(180*g.V/Math.PI).toFixed(2)}
Block: 0 0 0
Chunk: 0 0 0 in 0 0
Facing: 0`:"";if(!e.l||f.v){f.v=!1;c=N.data;var r=e.A,t=e.B,ma=e.U,na=.5*r,oa=.5*t,O=1/r,P=1/t,v=g.m,w=g.V,Q=g.O,R=g.P;g=g.T;var S=Math.cos(v);v=Math.sin(v);var T=Math.cos(-w);w=Math.sin(-w);var u=e.$/45;e=r<t?u*r*P:u;u=t<r?u*t*O:u;var D=0;for(let G=0;G<t;++G)for(let H=0;H<r;++H){var x=(H-na)*O*e,y=(oa-G)*P*u;const U=y*T-w;var q=T+y*w;y=x*S+q*v;x=q*S-x*v;q=8696319;let E=1,V=ma;for(let n=0;3>n;++n){var l=0===n?y:1===n?U:x;const z=1/(0>l?-l:l),W=y*z,X=U*z,Y=x*z;var h=0===n?Q%1:1===n?R%1:g%1;h=0>h?-h:
h;h=0<l?1-h:h;let I=Q+W*h,A=R+X*h,J=g+Y*h;h*=z;for(0===n?I+=0>l?-.5:.5:1===n?A+=0>l?-.5:.5:J+=0>l?-.5:.5;h<V;)if(l=0>A||64<=A?0:la.K[L(I,A,J)],0===l)I+=W,A+=X,J+=Y,h+=z;else{q=ca[l];E=1-(n+2)%3*.2;V=h;break}}c[D]=(q>>16&255)*E;c[++D]=(q>>8&255)*E;c[++D]=(q&255)*E;D+=2}f.aa.putImageData(N,0,0)}}},[ba()]);aa();return[K("canvas",{R:C(c=>{ia(b,c)})}),b.g&&b.L&&K("div[className=diagnostics]",{innerText:b.g.ca}),b.M&&F(ja,{j:b,ha:b.u,ia:b.i})]};k.init(()=>{const a=C({j:null}),d=C(b=>{var c;if(!(c=!a.j))a:{c=a.j;var f=b.keyCode;if("keydown"===b.type)switch(f){case 27:c.l=c.M=!c.M;break;case 16:c.h.J=-.1;break;case 32:c.h.J=.1;break;case 65:c.h.o=-.1;break;case 68:c.h.o=.1;break;case 80:c.l=!c.l;break;case 83:c.h.s=-.1;break;case 87:c.h.s=.1;break;case 114:c.L=!c.L;break;default:c=!0;break a}else switch(f){case 16:case 32:c.h.J=0;break;case 65:case 68:c.h.o=0;break;case 83:case 87:c.h.s=0;break;default:c=!0;break a}c=!1}return c||(b.preventDefault(),
!1)});return[{onkeydown:d,onkeyup:d},[F(ka,{fa:a})]]});
