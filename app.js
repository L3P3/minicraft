const u=lui,ea=u.hook_callback,fa=u.hook_dom,z=u.hook_effect,ha=u.hook_memo,ia=u.hook_reducer,ja=u.hook_rerender,C=u.hook_static,ka=u.node,D=u.node_dom,la=u.now,F=document,G=Math,L=G.PI,ma=.5*L,sa=180/L,M=G.floor,ta=G.round,ua=G.min,P=G.max,Q=G.cos,U=G.sin,va=G.sqrt,wa=String.fromCharCode,xa=JSON,V=localStorage,ya=Uint8Array,W=Uint32Array,X=Map,za=()=>!1,Aa=[()=>{const a={M:!0,Y:3,K:10,$:80,L:64};var e=V.getItem("minicraft.config");if(e){e=xa.parse(e);let d=e.flag_textures;null!=d&&(a.M=d);null!=
(d=e.mouse_sensitivity)&&(a.Y=d);a.K=e.resolution_scaling;a.$=e.view_angle;a.L=e.view_distance}return{j:a}},a=>{const e=a.j;V.setItem("minicraft.config",xa.stringify({version:"0.2.2",flag_textures:e.M,mouse_sensitivity:e.Y,resolution_scaling:e.K,view_angle:e.$,view_distance:e.L}));return a},(a,e)=>Object.assign({},a,{j:Object.assign({},a.j,e)})],Ba=[0,7960953,5420927,3757176,8553090,5077911,4539717,31E5,2261551,8424632,14145495],Ca=Ba.length,Da="WEBTSN".split(""),Ea=[6,1,1,3,3,3,2],Fa=Ea.length,Ga=
a=>{a+=32;33<a&&39>a?a++:38<a&&44>a?a+=2:43<a&&127>a?a+=3:126<a&&55258>a?a+=37:55295<a&&(a+=8485);return wa(a)},Ha=a=>a-(63743<a?8517:159<a?69:46<a&&130>a?35:40<a&&46>a?34:34<a&&40>a?33:32),Ja=()=>{var a=Ia;const e=a.length,d=new X,b=r=>{q=q<<1|r&1;15===++n&&(k+=Ga(q),q=n=0)},h=()=>{for(let r=0;r<p;++r)b(0)},m=r=>{b(r);b(r>>1);b(r>>2);b(r>>3);b(r>>4);b(r>>5);b(r>>6);b(r>>7)},g=()=>{0===--w&&(w=1<<p++)},c=()=>{if(t)t=!1;else{let r=v.id;for(let l=0;l<p;l++)b(r>>l)}};let f=a[0],k="",q=0,n=2,p=2,w=2,
x=2,v={id:x++,ca:new X},t=!0;m(f);d.set(f,v);for(let r=1;r<e;++r){const l=v.ca.get(f=a[r]);l?v=l:(c(),d.has(f)||(g(),h(),m(f),d.set(f,{id:x++,ca:new X}),t=!0),v.ca.set(f,{id:x++,ca:new X}),v=d.get(f),g())}c();d.has(f)||(g(),h(),m(f));g();b(1);--p;h();return k+=Ga(q<<15-n)},Ka=a=>{var e=Ia;if(!a)return null;const d=a.length,b=()=>{n+=(x>>--v&1)<<p++;0===v&&(v=15,x=Ha(a.charCodeAt(w++)))};let h=[0,1],m=1,g=3,c=2,f=null;var k=null;let q=0,n=0;k=2;let p=0,w=0,x=Ha(a.charCodeAt(w++)),v=15;for(;p<k;)b();
if(1===n)return null;for(n=p=0;8>p;)b();f=[n];h[2]=f;for(e[q++]=n;w<=d;){k=c;for(n=p=0;p<k;)b();if(0===n){for(n=p=0;8>p;)b();h[g]=[n];n=g++;0===--m&&(m=1<<c++)}else if(1===n)return e;k=n<h.length?h[n]:f.concat(f[0]);for(let t=0;t<k.length;t++)e[q++]=k[t];h[g++]=f.concat(k[0]);f=k;0===--m&&(m=1<<c++)}return null},La=new W(4);for(let a=0;a<Fa;++a)La[a>>2]|=Ea[a]<<(a<<3);
const Ma=new W(1024),Ia=new ya(Ma.buffer),bb=new X,cb=(a,e,d,b,h)=>{const m=a.B[e>>4<<a.i|b>>4];a.V[(e<<a.i+4|b)<<4|d]=h;m.W=!0},db=a=>{const e=a.pa,d=a.qa,b=a.i,h=`${b} ${e} ${d}`;let m=bb.get(h);if(null==m){const g=1<<b;bb.set(h,m=a.B.map(({x:c,z:f},k)=>{let q=Math.pow(c-e,2),n=Math.pow(f-d,2),p=Math.pow(c-e-g,2),w=0,x=0;p<q&&(q=p,w=-g);(p=Math.pow(c-e+g,2))<q&&(q=p,w=g);(p=Math.pow(f-d-g,2))<n&&(n=p,x=-g);(p=Math.pow(f-d+g,2))<n&&(n=p,x=g);return{Da:va(q+n),index:k,N:w,O:x}}).sort((c,f)=>c.Da-
f.Da))}a.na=m;a.da=0},eb=(a,e)=>{const d=a.la,b=e.x<<4,h=e.z<<4;for(let m=0,g=0;16>m;++m){const c=((b+m<<a.i+4|h)<<4|0)>>2;Ma.set(d.subarray(c,c+64),g);g+=64}V.setItem(`minicraft.world.${a.id}:${e.xa}/${e.ya}`,Ja());e.W=!1},fb=a=>{var e=a.B,d=a.na,b=a.N,h=a.O;const m=d.length;for(;a.da<m;){var g=d[a.da++];const k=e[g.index];var c=k.x,f=k.z;const q=b+g.N+c;g=h+g.O+f;if(q!==k.xa||g!==k.ya){k.W&&eb(a,k);d=Ka(V.getItem(`minicraft.world.${a.id}:${k.xa=q}/${k.ya=g}`));e=a.la;c<<=4;f<<=4;if(d)for(let n=
0,p=0;16>n;++n)e.set(Ma.subarray(p,p+=64),((c+n<<a.i+4|f)<<4|0)>>2);else for(d=0;16>d;++d)for(b=((c+d<<a.i+4|f)<<4|0)>>2,h=0;16>h;++h)e.set(La,b),b+=4;break}}};let gb=null,Y=new Image;Y.onload=()=>{var a=F.createElement("canvas");const e=a.width=Y.width,d=a.height=Y.height;a=a.getContext("2d");a.drawImage(Y,0,0);Y=gb=new W(a.getImageData(0,0,e,d).data.buffer)};Y.src="data:image/png;base64,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";
const ib=(a,e)=>{const d={ma:e,Aa:null,Ba:null,Ca:"",fa:!1,Ea:0,ra:0,La:setInterval(()=>{d.Ea=d.ra;d.ra=0},1E3),h:a};hb(d);return d},hb=a=>{var e=a.ma.width=a.h.ha,d=a.ma.height=a.h.ia;a=(a.Ba=(a.Aa=a.ma.getContext("2d")).createImageData(e,d)).data;e=a.length;for(d=3;d<e;d+=4)a[d]=255},jb=()=>{const a={V:null,la:null,B:null,na:null,da:0,pa:0,qa:0,id:0,N:0,O:0,i:0,Ha:.5,Ia:Fa+1.5,Ja:.5};return{j:null,ea:!1,G:!1,l:!0,ga:!1,Fa:null,sa:0,X:new Set,ta:"",g:{ja:0,za:0,ka:0,u:0,aa:0,ba:0,v:0,m:-1,A:0,Ga:9,
H:a.Ha,Z:a.Ia,J:a.Ja,P:0,T:0,U:0},s:null,ua:1,va:1,ha:0,ia:0,Ka:null,time:0,wa:0,o:a}},kb=(a,e)=>{a.s=ib(a,e);a.Ka=setInterval(()=>{if(!a.l){a.time=(a.time+1)%24E3;a.wa=1/24E3*(a.time+6E3)%1;var d=a.g,b=a.o,h=M(d.H)>>4;d=M(d.J)>>4;if(b.N+b.pa!==h||b.O+b.qa!==d){const m=1<<b.i;b.N=h-(b.pa=(65536+h)%m);b.O=d-(b.qa=(65536+d)%m);db(b)}fb(b)}},50)},lb=a=>{var e=a.g,d=(a=a.X).has(-12)||a.has(65);a=a.has(-13)||a.has(68);e.ja=d===a?0:.1-.2*d},mb=a=>{var e=a.g,d=(a=a.X).has(-15)||a.has(16);a=a.has(-14)||a.has(32);
e.za=d===a?0:.1-.2*d},nb=a=>{var e=a.g,d=(a=a.X).has(-11)||a.has(83);a=a.has(-10)||a.has(87);e.ka=d===a?0:.1-.2*d},Z=(a,e,d)=>{const b=a.X;if(d){if(b.has(e))return!1;b.add(e);switch(e){case -1:0<=a.g.m&&cb(a.o,a.g.v,a.g.m,a.g.A,0);break;case -2:case 71:0<=a.g.m&&(e=a.o,d=a.g.m,a.g.Ga=0>d||16<=d?0:e.V[(a.g.v<<e.i+4|a.g.A)<<4|d]);break;case -3:if(0<=a.g.m){e=a.g.v;d=a.g.m;let h=a.g.A;switch(a.g.ba){case 0:--e;break;case 1:++e;break;case 2:--d;break;case 3:++d;break;case 4:--h;break;default:++h}0<=d&&
16>d&&cb(a.o,e&(1<<4+a.o.i)-1,d,h&(1<<4+a.o.i)-1,a.g.Ga)}break;case 27:a.l=a.G=!a.G;break;case -15:case -14:case 16:case 32:mb(a);break;case -12:case -13:case 65:case 68:lb(a);break;case 80:a.l=!a.l;break;case 82:a.g.H=a.o.Ha;a.g.Z=a.o.Ia;a.g.J=a.o.Ja;break;case -11:case -10:case 83:case 87:nb(a);break;case 114:a.ea=!a.ea;break;default:return!1}}else{if(!b.delete(e))return!1;switch(e){case -15:case -14:case 16:case 32:mb(a);break;case -12:case -13:case 65:case 68:lb(a);break;case -11:case -10:case 83:case 87:nb(a)}}a.ta=
[...b].join();return!0};
function ob({j:a,oa:e,h:d}){fa("div[className=menu]");return[D("h1[innerText=Men\u00fc]"),D("div[className=settings]",null,[D("button",{innerText:"Oberfl\u00e4chen: "+(a.M?"Texturiert":"Einfarbig"),onclick:ea(b=>{e(2,{M:!b})},[a.M])}),D("label[innerText=Aufl\u00f6sung:]",null,[D("input[type=range][min=1][max=100][step=1]",{value:101-a.K,onchange:C(b=>e(2,{K:101-Number(b.target.value)}))})]),D("label[innerText=Blickwinkel:]",null,[D("input[type=range][min=1][max=180][step=1]",{value:a.$,onchange:C(b=>
e(2,{$:Number(b.target.value)}))})]),D("label[innerText=Sichtweite:]",null,[D("input[type=range][min=1][max=128][step=1]",{value:a.L,onchange:C(b=>e(2,{L:Number(b.target.value)}))})]),D("label[innerText=Mausempfindlichkeit:]",null,[D("input[type=range][min=1][max=15][step=1]",{value:a.Y,onchange:C(b=>e(2,{Y:Number(b.target.value)}))})])]),D("div",null,[D("button[innerText=Zur\u00fcck]",{onclick:C(b=>(d.G=!1,"mouse"===b.pointerType?d.Fa.requestPointerLock():d.l=!1))})])]}
const pb=[["place",-3],["pick",-2],["up",-14],["down",-15],["spawn",82],["f3",114],["...",27]],qb=[["up",-10],["down",-11],["left",-12],["right",-13],["center",-1]];
function rb({h:a}){const e=a.X;fa("div[className=touch]",C({ontouchstart:d=>{d.preventDefault();const b=Number(d.target.dataset.code);if(null!=b&&Z(a,b,!0)){const h=d.changedTouches[0].identifier,m=g=>{g.changedTouches[0].identifier===h&&(removeEventListener("touchend",m),Z(a,b,!1))};addEventListener("touchend",m)}}}));return[D("div[className=top]",null,pb.map(([d,b])=>D(`div[innerText=${d}]`,{D:{code:b},F:{button:!0,active:e.has(b)}}))),D("div[className=move]",null,qb.map(([d,b])=>D("div",{D:{code:b},
F:{button:!0,[d]:!0,active:e.has(b)}})))]}
function sb({j:a,oa:e,Ma:d}){const b=ha(jb),h=fa("div[className=game]",ha(()=>{const g=c=>b.G||(b.ga=!1,F.pointerLockElement===h?b.l||Z(b,-1-c.button,"mousedown"===c.type):b.Fa.requestPointerLock(),c.preventDefault(),!1);return{onmousedown:g,onmousemove:c=>{if(!b.l){const f=b.j.Y*L/P(b.ua,b.va);b.g.u=(b.g.u+c.movementX*f+100*L)%(2*L);b.g.aa=P(-ma,ua(ma,b.g.aa-c.movementY*f))}},onmouseup:g,ontouchstart:c=>{b.ga=!0;b.G||(b.l=!1,c.preventDefault())}}})),m=F.pointerLockElement===h;z(()=>(b.Fa=h,d.h=b,
()=>{clearInterval(b.Ka);clearInterval(b.s.La);return d.h=null}));z(()=>{b.j=a;b.s&&(b.s.fa=!0);const g=b.o;var c=b.j.L;c=17>c?2:49>c?3:113>c?4:241>c?5:497>c?6:1009>c?7:2033>c?8:4081>c?9:8177>c?10:16369>c?11:32753>c?12:13;if(g.i!==c){if(g.B)for(var f of g.B)f.W&&eb(g,f);g.la=new W((g.V=new ya(1<<12+(c<<1))).buffer);f=1<<(g.i=c);c=g.B=[];for(let k=0;k<f;++k)for(let q=0;q<f;++q)c.push({W:!1,x:k,z:q,xa:g.N+k+1,ya:g.O+q+1});db(g);fb(g);for(f=0;f<Ca;++f)cb(g,f,Fa,1,f)}},[a]);z((g,c)=>{b.ua=P(1,g);b.va=
P(1,c);c=b.j.K;g=P(1,ta(b.ua/c));c=P(1,ta(b.va/c));if(g!==b.ha||c!==b.ia)b.ha=g,b.ia=c,b.s&&(b.s.fa=!0,hb(b.s))},[h.offsetWidth,h.offsetHeight,a.K]);z(()=>{m||b.l||(b.G=!0);b.l=!m},[m]);z(g=>g&&m&&F.exitPointerLock(),[b.l]);z(g=>{if(b.sa&&!b.l){var c=b.g,f=ua(5,.01*(g-b.sa));c.P-=.1*c.P*f;c.T-=.1*c.T*f;c.U-=.1*c.U*f;c.P+=(Q(c.u)*c.ja+U(c.u)*c.ka)*f;c.T+=c.za*f;c.U+=(-U(c.u)*c.ja+Q(c.u)*c.ka)*f;c.H+=c.P*f;c.Z+=c.T*f;c.J+=c.U*f}if(b.s){c=b.s;++c.ra;var k=c.Ba;f=c.h;const r=f.j,l=f.g,E=f.ha,H=f.ia,I=
f.o;if(!f.l||c.fa){c.fa=!1;const N=k.data,tb=r.L;var q=l.u,n=l.aa;const ub=l.v,vb=l.m,wb=l.A,xb=I.V,yb=r.M&&null!==gb,Na=1/E,Oa=1/H,na=E>>1,oa=H>>1,Pa=Q(q);q=U(q);const Qa=Q(-n);n=U(-n);var p=r.$/45;const zb=E<H?p*E*Oa:p;p=H<E?p*H*Na:p;const Ra=l.H+65536,Sa=l.Z+65536,Ta=l.J+65536,Ab=Ra%1,Bb=Sa%1,Cb=Ta%1,Ua=4+I.i,Va=(1<<Ua)-1;let Wa=5,J=l.v=l.A=l.ba=0;l.m=-1;for(let aa=0;aa<H;++aa){var w=(oa-aa)*Oa*p;const Xa=w*Qa-n;w=w*n+Qa;for(let ba=0;ba<E;++ba){var x=(ba-na)*Na*zb;const Ya=w*q+x*Pa;x=w*Pa-x*q;
let R=16757124,ca=1,Za=tb;for(let y=0;3>y;++y){let A=x;0===y&&(A=Ya);1===y&&(A=Xa);var v=1/(0>A?-A:A);const da=Ya*v,K=Xa*v;v*=x;const $a=va(da*da+K*K+v*v);var t=Cb;0===y&&(t=Ab);1===y&&(t=Bb);0<A&&(t=1-t);let S=Ra+da*t,O=Sa+K*t,T=Ta+v*t;t*=$a;0===y&&(S+=.5-(0>A|0));1===y&&(O+=.5-(0>A|0));2===y&&(T+=.5-(0>A|0));for(let pa,qa,ra,B;t<Za;S+=da,O+=K,T+=v,t+=$a)if(65536>O){if(0>K)break}else if(65552<=O){if(0<K)break}else if(0!==(B=xb[((pa=S&Va)<<Ua|(ra=T&Va))<<4|(qa=O&15)])){aa===oa&&ba===na&&t<=Wa&&(l.v=
pa,l.m=qa,l.A=ra,l.ba=0>A|y<<1,Wa=t);if(yb){--B;1===y?6===B?B=11:1===B&&0<K&&(B=2):1===B&&(B=10);const ab=gb[B<<8|(16*(1===y?T:O)&15)<<4|16*(1===y?S:S+T)&15];if(0===ab>>>24)continue;R=ab&16777215}else R=Ba[B];Za=t;ca=1-(y+2)%3*.2+(qa!==vb||pa!==ub||ra!==wb?0:.1);break}}N[J]=(R&255)*ca;N[++J]=(R>>8&255)*ca;N[++J]=(R>>16)*ca;J+=2}}N[J=E*oa+na<<2]+=128;N[++J]+=128;N[++J]+=128;c.Aa.putImageData(k,0,0)}f.ea?(0>l.m?k=0:(k=l.m,k=l.v+" "+l.m+" "+l.A+" "+Da[l.ba]+": "+(0>k||16<=k?0:I.V[(l.v<<I.i+4|l.A)<<4|
k])),f="Minicraft 0.2.2 "+M(c.Ea).toString().padStart(2,"\u00a0")+" fps, T: "+M(24*f.wa).toString().padStart(2,"0")+":"+M(24*f.wa%1*60).toString().padStart(2,"0")+"; "+(f.l&&500>g%1E3?"":f.time)+"\nR: "+E+"x"+H+" (x"+r.K+"), D: "+r.L+", C: "+I.da+"/"+I.na.length+", M: "+(16*Math.pow(1<<4+I.i,2)>>10)+"k\nE: 0/0\n\nPosition: "+l.H.toFixed(2)+" "+l.Z.toFixed(2)+" "+l.J.toFixed(2)+"\nAngle: "+(l.u*sa).toFixed(2)+" "+(l.aa*sa).toFixed(2)+"\nBlock: "+k+"\nChunk: "+(M(l.H)>>4)+" "+(M(l.J)>>4)):f="";c.Ca=
f}b.sa=g},[la()]);ja();return[D("canvas",{R:C(g=>kb(b,g))}),b.s&&b.ea&&D("div[className=diagnostics]",{innerText:b.s.Ca}),b.ga&&ka(rb,{h:b,ta:b.ta}),b.G&&ka(ob,{j:a,oa:e,h:b})]}u.init(()=>{const [a,e]=ia(Aa),d=C({h:null});z(()=>{onbeforeunload=()=>{e(1);if(d.h){var h=d.h.o;for(const m of h.B)m.W&&eb(h,m)}}});const b=C(h=>(h.preventDefault(),!d.h||(d.h.ga=!1,Z(d.h,h.keyCode,"keydown"===h.type))));return[{onkeydown:b,onkeyup:b,oncontextmenu:za,ondragstart:za},[ka(sb,{j:a.j,oa:e,Ma:d})]]});
