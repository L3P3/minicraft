const t=lui,aa=t.hook_callback,z=t.hook_dom,A=t.hook_effect,ba=t.hook_memo,ca=t.hook_reducer,ia=t.hook_rerender,D=t.hook_static,F=t.node,G=t.node_dom,ja=t.node_map,ka=t.now,la=[0,7960953,5420927,3757176,8553090,5077911,4539717,31E5,2261551,8424632,14145495],ma=la.length,na="WEBTSN".split(""),ta=[6,1,1,3,3,3,2],ua=ta.length,L=document,M=Math,P=M.PI,va=.5*P,wa=180/P,Q=M.floor,xa=M.round,ya=M.min,R=M.max,V=M.cos,W=M.sin,za=M.sqrt,Aa=String.fromCharCode,Ba=JSON,X=localStorage,Ca=Uint8Array,Da=Uint32Array,
Y=Map,Ea=()=>!1,Fa=[()=>{const a={M:!0,Z:3,K:10,aa:80,L:64};var e=X.getItem("minicraft.config");if(e){e=Ba.parse(e);let c=e.flag_textures;null!=c&&(a.M=c);null!=(c=e.mouse_sensitivity)&&(a.Z=c);a.K=e.resolution_scaling;a.aa=e.view_angle;a.L=e.view_distance}return{m:a}},a=>{const e=a.m;X.setItem("minicraft.config",Ba.stringify({version:"0.3.1",flag_textures:e.M,mouse_sensitivity:e.Z,resolution_scaling:e.K,view_angle:e.aa,view_distance:e.L}));return a},(a,e)=>Object.assign({},a,{m:Object.assign({},
a.m,e)})],Ga=a=>{a+=32;33<a&&39>a?a++:38<a&&44>a?a+=2:43<a&&127>a?a+=3:126<a&&55258>a?a+=37:55295<a&&(a+=8485);return Aa(a)},Ha=a=>a-(63743<a?8517:159<a?69:46<a&&130>a?35:40<a&&46>a?34:34<a&&40>a?33:32),Ja=()=>{var a=Ia;const e=a.length,c=new Y,b=r=>{q=q<<1|r&1;15===++n&&(k+=Ga(q),q=n=0)},h=()=>{for(let r=0;r<p;++r)b(0)},m=r=>{b(r);b(r>>1);b(r>>2);b(r>>3);b(r>>4);b(r>>5);b(r>>6);b(r>>7)},g=()=>{0===--w&&(w=1<<p++)},d=()=>{if(u)u=!1;else{let r=v.id;for(let l=0;l<p;l++)b(r>>l)}};let f=a[0],k="",q=0,
n=2,p=2,w=2,x=2,v={id:x++,da:new Y},u=!0;m(f);c.set(f,v);for(let r=1;r<e;++r){const l=v.da.get(f=a[r]);l?v=l:(d(),c.has(f)||(g(),h(),m(f),c.set(f,{id:x++,da:new Y}),u=!0),v.da.set(f,{id:x++,da:new Y}),v=c.get(f),g())}d();c.has(f)||(g(),h(),m(f));g();b(1);--p;h();return k+=Ga(q<<15-n)},Ka=a=>{var e=Ia;if(!a)return null;const c=a.length,b=()=>{n+=(x>>--v&1)<<p++;0===v&&(v=15,x=Ha(a.charCodeAt(w++)))};let h=[0,1],m=1,g=3,d=2,f=null;var k=null;let q=0,n=0;k=2;let p=0,w=0,x=Ha(a.charCodeAt(w++)),v=15;
for(;p<k;)b();if(1===n)return null;for(n=p=0;8>p;)b();f=[n];h[2]=f;for(e[q++]=n;w<=c;){k=d;for(n=p=0;p<k;)b();if(0===n){for(n=p=0;8>p;)b();h[g]=[n];n=g++;0===--m&&(m=1<<d++)}else if(1===n)return e;k=n<h.length?h[n]:f.concat(f[0]);for(let u=0;u<k.length;u++)e[q++]=k[u];h[g++]=f.concat(k[0]);f=k;0===--m&&(m=1<<d++)}return null},La=new Da(4);for(let a=0;a<ua;++a)La[a>>2]|=ta[a]<<(a<<3);
const Ma=new Da(1024),Ia=new Ca(Ma.buffer),Na=new Y,Oa=(a,e,c,b,h)=>{const m=a.G[e>>4<<a.l|b>>4];a.V[(e<<a.l+4|b)<<4|c]=h;m.W=!0},db=a=>{const e=a.qa,c=a.ra,b=a.l,h=`${b} ${e} ${c}`;let m=Na.get(h);if(null==m){const g=1<<b;Na.set(h,m=a.G.map(({x:d,z:f},k)=>{let q=Math.pow(d-e,2),n=Math.pow(f-c,2),p=Math.pow(d-e-g,2),w=0,x=0;p<q&&(q=p,w=-g);(p=Math.pow(d-e+g,2))<q&&(q=p,w=g);(p=Math.pow(f-c-g,2))<n&&(n=p,x=-g);(p=Math.pow(f-c+g,2))<n&&(n=p,x=g);return{Ea:za(q+n),index:k,N:w,O:x}}).sort((d,f)=>d.Ea-
f.Ea))}a.oa=m;a.ea=0},eb=(a,e)=>{const c=a.ma,b=e.x<<4,h=e.z<<4;for(let m=0,g=0;16>m;++m){const d=((b+m<<a.l+4|h)<<4|0)>>2;Ma.set(c.subarray(d,d+64),g);g+=64}X.setItem(`minicraft.world.${a.id}:${e.ya}/${e.za}`,Ja());e.W=!1},fb=a=>{var e=a.G,c=a.oa,b=a.N,h=a.O;const m=c.length;for(;a.ea<m;){var g=c[a.ea++];const k=e[g.index];var d=k.x,f=k.z;const q=b+g.N+d;g=h+g.O+f;if(q!==k.ya||g!==k.za){k.W&&eb(a,k);c=Ka(X.getItem(`minicraft.world.${a.id}:${k.ya=q}/${k.za=g}`));e=a.ma;d<<=4;f<<=4;if(c)for(let n=
0,p=0;16>n;++n)e.set(Ma.subarray(p,p+=64),((d+n<<a.l+4|f)<<4|0)>>2);else for(c=0;16>c;++c)for(b=((d+c<<a.l+4|f)<<4|0)>>2,h=0;16>h;++h)e.set(La,b),b+=4;break}}};let gb=null,Z=new Image;Z.onload=()=>{var a=L.createElement("canvas");const e=a.width=Z.width,c=a.height=Z.height;a=a.getContext("2d");a.drawImage(Z,0,0);Z=gb=new Da(a.getImageData(0,0,e,c).data.buffer)};Z.src="data:image/png;base64,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";
const ib=(a,e)=>{const c={na:e,Ba:null,Ca:null,Da:"",ga:!1,Fa:0,sa:0,Ma:setInterval(()=>{c.Fa=c.sa;c.sa=0},1E3),i:a};hb(c);return c},hb=a=>{var e=a.na.width=a.i.ia,c=a.na.height=a.i.ja;a=(a.Ca=(a.Ba=a.na.getContext("2d")).createImageData(e,c)).data;e=a.length;for(c=3;c<e;c+=4)a[c]=255};let jb=0;
const kb=()=>{const a={V:null,ma:null,G:null,oa:null,ea:0,qa:0,ra:0,id:0,N:0,O:0,l:0,Ia:.5,Ja:ua+1.5,Ka:.5};return{m:null,fa:!1,h:!0,ha:!1,Ga:null,ta:0,X:new Set,ua:"",j:0,Y:[],g:{ka:0,Aa:0,la:0,v:0,ba:0,ca:0,A:0,o:-1,B:0,Ha:9,H:a.Ia,$:a.Ja,J:a.Ka,P:0,T:0,U:0},u:null,va:1,wa:1,ia:0,ja:0,La:null,time:0,xa:0,s:a}},lb=(a,e)=>{a.u=ib(a,e);a.La=setInterval(()=>{if(!a.h){a.time=(a.time+1)%24E3;a.xa=1/24E3*(a.time+6E3)%1;var c=a.g,b=a.s,h=Q(c.H)>>4;c=Q(c.J)>>4;if(b.N+b.qa!==h||b.O+b.ra!==c){const m=1<<b.l;
b.N=h-(b.qa=(65536+h)%m);b.O=c-(b.ra=(65536+c)%m);db(b)}fb(b)}},50)},mb=a=>{var e=a.g,c=(a=a.X).has(-12)||a.has(65);a=a.has(-13)||a.has(68);e.ka=c===a?0:.1-.2*c},nb=a=>{var e=a.g,c=(a=a.X).has(-15)||a.has(16);a=a.has(-14)||a.has(32);e.Aa=c===a?0:.1-.2*c},ob=a=>{var e=a.g,c=(a=a.X).has(-11)||a.has(83);a=a.has(-10)||a.has(87);e.la=c===a?0:.1-.2*c},pb=(a,e,c)=>{const b=a.X;if(c){if(b.has(e))return!1;b.add(e);switch(e){case -1:0<=a.g.o&&Oa(a.s,a.g.A,a.g.o,a.g.B,0);break;case -2:case 71:0<=a.g.o&&(e=a.s,
c=a.g.o,a.g.Ha=0>c||16<=c?0:e.V[(a.g.A<<e.l+4|a.g.B)<<4|c]);break;case -3:if(0<=a.g.o){e=a.g.A;c=a.g.o;let h=a.g.B;switch(a.g.ca){case 0:--e;break;case 1:++e;break;case 2:--c;break;case 3:++c;break;case 4:--h;break;default:++h}0<=c&&16>c&&Oa(a.s,e&(1<<4+a.s.l)-1,c,h&(1<<4+a.s.l)-1,a.g.Ha)}break;case 27:a.j?(a.h=!1,a.j=0):(a.h=!0,a.j=1);break;case -15:case -14:case 16:case 32:nb(a);break;case -12:case -13:case 65:case 68:mb(a);break;case 80:a.h=!a.h;break;case 82:a.g.H=a.s.Ia;a.g.$=a.s.Ja;a.g.J=a.s.Ka;
break;case -11:case -10:case 83:case 87:ob(a);break;case 84:a.j||(a.j=2);break;case 114:a.fa=!a.fa;break;default:return!1}}else{if(!b.delete(e))return!1;switch(e){case -15:case -14:case 16:case 32:nb(a);break;case -12:case -13:case 65:case 68:mb(a);break;case -11:case -10:case 83:case 87:ob(a)}}a.ua=[...b].join();return!0},qb=(a,e)=>{a.Y=[...a.Y.slice(-30),{id:++jb,time:ka(),value:e}]};
function rb({m:a,pa:e,i:c}){z("div[className=menu]");return[G("h1[innerText=Men\u00fc]"),G("div[className=settings]",null,[G("button",{innerText:"Oberfl\u00e4chen: "+(a.M?"Texturiert":"Einfarbig"),onclick:aa(b=>{e(2,{M:!b})},[a.M])}),G("label[innerText=Aufl\u00f6sung:]",null,[G("input[type=range][min=1][max=100][step=1]",{value:101-a.K,onchange:D(b=>e(2,{K:101-Number(b.target.value)}))})]),G("label[innerText=Blickwinkel:]",null,[G("input[type=range][min=1][max=180][step=1]",{value:a.aa,onchange:D(b=>
e(2,{aa:Number(b.target.value)}))})]),G("label[innerText=Sichtweite:]",null,[G("input[type=range][min=1][max=128][step=1]",{value:a.L,onchange:D(b=>e(2,{L:Number(b.target.value)}))})]),G("label[innerText=Mausempfindlichkeit:]",null,[G("input[type=range][min=1][max=15][step=1]",{value:a.Z,onchange:D(b=>e(2,{Z:Number(b.target.value)}))})])]),G("center",null,[G("button[innerText=Zur\u00fcck]",{onclick:D(b=>(c.j=0,"mouse"===b.pointerType?c.Ga.requestPointerLock():c.h=!1))})])]}
const sb=({I:{value:a}})=>(z("div",{innerText:a}),null);
function tb({i:a,Y:e}){z("div[className=menu terminal]");return[G("div[className=history]",null,[ja(sb,e)]),G("input[autofocus][enterkeyhint=send][mozactionhint=send][name=message][required]",D({onkeydown:c=>{var b=c.keyCode;const h=c.target;if(13===b){b=h.value;if("/"===b.charAt(0))switch(b=b.substr(1).split(" ").shift(),b){case "exit":a.h=!1;a.j=0;break;case "help":qb(a,"commands: exit, help, version");break;case "version":qb(a,"Minicraft 0.3.1");break;default:qb(a,"unknown command: "+b)}else qb(a,
"<me> "+b);h.value=""}else 27===b&&(a.h=!1,a.j=0);c.stopPropagation()},onkeyup:c=>{c.stopPropagation()}}))]}const ub=[["place",-3],["pick",-2],["up",-14],["down",-15],["R",82],["T",84],["F3",114],["...",27]],vb=[["up",-10],["down",-11],["left",-12],["right",-13],["center",-1]];
function wb({i:a}){const e=a.X;z("div[className=touch]",D({ontouchstart:c=>{c.preventDefault();const b=Number(c.target.dataset.code);if(null!=b&&pb(a,b,!0)){const h=c.changedTouches[0].identifier,m=g=>{g.changedTouches[0].identifier===h&&(removeEventListener("touchend",m),pb(a,b,!1))};addEventListener("touchend",m)}}}));return[G("div[className=top]",null,ub.map(([c,b])=>G(`div[innerText=${c}]`,{D:{code:b},F:{button:!0,active:e.has(b)}}))),G("div[className=move]",null,vb.map(([c,b])=>G("div",{D:{code:b},
F:{button:!0,[c]:!0,active:e.has(b)}})))]}
function xb({m:a,pa:e,Na:c}){const b=ba(kb),h=z("div[className=game]",ba(()=>{const g=d=>0!==b.j||(b.ha=!1,L.pointerLockElement===h?b.h||pb(b,-1-d.button,"mousedown"===d.type):b.Ga.requestPointerLock(),d.preventDefault(),!1);return{onmousedown:g,onmousemove:d=>{if(!b.h&&!b.j){const f=b.m.Z*P/R(b.va,b.wa);b.g.v=(b.g.v+d.movementX*f+100*P)%(2*P);b.g.ba=R(-va,ya(va,b.g.ba-d.movementY*f))}},onmouseup:g,ontouchstart:d=>{b.ha=!0;b.j||(b.h=!1,d.preventDefault())}}})),m=L.pointerLockElement===h;A(()=>(b.Ga=
h,c.i=b,()=>{clearInterval(b.La);clearInterval(b.u.Ma);return c.i=null}));A(()=>{b.m=a;b.u&&(b.u.ga=!0);const g=b.s;var d=b.m.L;d=17>d?2:49>d?3:113>d?4:241>d?5:497>d?6:1009>d?7:2033>d?8:4081>d?9:8177>d?10:16369>d?11:32753>d?12:13;if(g.l!==d){if(g.G)for(var f of g.G)f.W&&eb(g,f);g.ma=new Da((g.V=new Ca(1<<12+(d<<1))).buffer);f=1<<(g.l=d);d=g.G=[];for(let k=0;k<f;++k)for(let q=0;q<f;++q)d.push({W:!1,x:k,z:q,ya:g.N+k+1,za:g.O+q+1});db(g);fb(g);for(f=0;f<ma;++f)Oa(g,f,ua,1,f)}},[a]);A((g,d)=>{b.va=R(1,
g);b.wa=R(1,d);d=b.m.K;g=R(1,xa(b.va/d));d=R(1,xa(b.wa/d));if(g!==b.ia||d!==b.ja)b.ia=g,b.ja=d,b.u&&(b.u.ga=!0,hb(b.u))},[h.offsetWidth,h.offsetHeight,a.K]);A(()=>{m||b.h||b.j||(b.j=1);b.h=!m},[m]);A(g=>m&&g&&L.exitPointerLock(),[b.h||b.j]);A(g=>{if(b.ta&&!b.h){var d=b.g,f=ya(5,.01*(g-b.ta));d.P-=.1*d.P*f;d.T-=.1*d.T*f;d.U-=.1*d.U*f;d.P+=(V(d.v)*d.ka+W(d.v)*d.la)*f;d.T+=d.Aa*f;d.U+=(-W(d.v)*d.ka+V(d.v)*d.la)*f;d.H+=d.P*f;d.$+=d.T*f;d.J+=d.U*f}if(b.u){d=b.u;++d.sa;var k=d.Ca;f=d.i;const r=f.m,l=f.g,
E=f.ia,H=f.ja,I=f.s;if(!f.h||d.ga){d.ga=!1;const N=k.data,yb=r.L;var q=l.v,n=l.ba;const zb=l.A,Ab=l.o,Bb=l.B,Cb=I.V,Db=r.M&&null!==gb,Pa=1/E,Qa=1/H,oa=E>>1,pa=H>>1,Ra=V(q);q=W(q);const Sa=V(-n);n=W(-n);var p=r.aa/45;const Eb=E<H?p*E*Qa:p;p=H<E?p*H*Pa:p;const Ta=l.H+65536,Ua=l.$+65536,Va=l.J+65536,Fb=Ta%1,Gb=Ua%1,Hb=Va%1,Wa=4+I.l,Xa=(1<<Wa)-1;let Ya=5,J=l.A=l.B=l.ca=0;l.o=-1;for(let da=0;da<H;++da){var w=(pa-da)*Qa*p;const Za=w*Sa-n;w=w*n+Sa;for(let ea=0;ea<E;++ea){var x=(ea-oa)*Pa*Eb;const $a=w*q+
x*Ra;x=w*Ra-x*q;let S=16757124,fa=1,ab=yb;for(let y=0;3>y;++y){let B=x;0===y&&(B=$a);1===y&&(B=Za);var v=1/(0>B?-B:B);const ha=$a*v,K=Za*v;v*=x;const bb=za(ha*ha+K*K+v*v);var u=Hb;0===y&&(u=Fb);1===y&&(u=Gb);0<B&&(u=1-u);let T=Ta+ha*u,O=Ua+K*u,U=Va+v*u;u*=bb;0===y&&(T+=.5-(0>B|0));1===y&&(O+=.5-(0>B|0));2===y&&(U+=.5-(0>B|0));for(let qa,ra,sa,C;u<ab;T+=ha,O+=K,U+=v,u+=bb)if(65536>O){if(0>K)break}else if(65552<=O){if(0<K)break}else if(0!==(C=Cb[((qa=T&Xa)<<Wa|(sa=U&Xa))<<4|(ra=O&15)])){da===pa&&ea===
oa&&u<=Ya&&(l.A=qa,l.o=ra,l.B=sa,l.ca=0>B|y<<1,Ya=u);if(Db){--C;1===y?6===C?C=11:1===C&&0<K&&(C=2):1===C&&(C=10);const cb=gb[C<<8|(16*(1===y?U:O)&15)<<4|16*(1===y?T:T+U)&15];if(0===cb>>>24)continue;S=cb&16777215}else S=la[C];ab=u;fa=1-(y+2)%3*.2+(ra!==Ab||qa!==zb||sa!==Bb?0:.1);break}}N[J]=(S&255)*fa;N[++J]=(S>>8&255)*fa;N[++J]=(S>>16)*fa;J+=2}}N[J=E*pa+oa<<2]+=128;N[++J]+=128;N[++J]+=128;d.Ba.putImageData(k,0,0)}f.fa?(0>l.o?k=0:(k=l.o,k=l.A+" "+l.o+" "+l.B+" "+na[l.ca]+": "+(0>k||16<=k?0:I.V[(l.A<<
I.l+4|l.B)<<4|k])),f="Minicraft 0.3.1 "+Q(d.Fa).toString().padStart(2,"\u00a0")+" fps, T: "+Q(24*f.xa).toString().padStart(2,"0")+":"+Q(24*f.xa%1*60).toString().padStart(2,"0")+"; "+(f.h&&500>g%1E3?"":f.time)+"\nR: "+E+"x"+H+" (x"+r.K+"), D: "+r.L+", C: "+I.ea+"/"+I.oa.length+", M: "+(16*Math.pow(1<<4+I.l,2)>>10)+"k\nE: 0/0\n\nPosition: "+l.H.toFixed(2)+" "+l.$.toFixed(2)+" "+l.J.toFixed(2)+"\nAngle: "+(l.v*wa).toFixed(2)+" "+(l.ba*wa).toFixed(2)+"\nBlock: "+k+"\nChunk: "+(Q(l.H)>>4)+" "+(Q(l.J)>>
4)):f="";d.Da=f}b.ta=g},[ka()]);ia();return[G("canvas",{R:D(g=>lb(b,g))}),b.u&&b.fa&&G("div[className=diagnostics]",{innerText:b.u.Da}),b.ha&&F(wb,{i:b,ua:b.ua}),1===b.j&&F(rb,{m:a,pa:e,i:b}),2===b.j&&F(tb,{i:b,Y:b.Y})]}
t.init(()=>{const [a,e]=ca(Fa),c=D({i:null});A(()=>{onbeforeunload=()=>{e(1);if(c.i){var h=c.i.s;for(const m of h.G)m.W&&eb(h,m)}}});const b=D(h=>(h.preventDefault(),!c.i||(c.i.ha=!1,pb(c.i,h.keyCode,"keydown"===h.type))));return[{onkeydown:b,onkeyup:b,oncontextmenu:Ea,ondragstart:Ea},[F(xb,{m:a.m,pa:e,Na:c})]]});
