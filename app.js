const l=lui,fa=l.hook_callback,ha=l.hook_dom,q=l.hook_effect,ia=l.hook_memo,ja=l.hook_reducer,ka=l.hook_rerender,v=l.hook_static,la=l.node,w=l.node_dom,ma=l.now,z=Math,F=z.PI,na=180/F,N=z.floor,oa=z.round,pa=z.min,O=z.max,P=z.cos,T=z.sin,Ba=JSON,Ca=localStorage,Da=()=>!1,Ea=[()=>{const a={B:!0,A:10,M:80,J:64};var b=Ca.getItem("minicraft.config");if(b){b=Ba.parse(b);let d=b.flag_textures;void 0!==d&&(a.B=d);a.A=b.resolution_scaling;a.M=b.view_angle;a.J=b.view_distance}return{i:a}},a=>{const b=a.i;
Ca.setItem("minicraft.config",Ba.stringify({version:"0.1.15",flag_textures:b.B,resolution_scaling:b.A,view_angle:b.M,view_distance:b.J}));return a},(a,b)=>Object.assign({},a,{i:Object.assign({},a.i,b)})];
function Fa({i:a,ba:b,m:d}){ha("div[className=menu]");return[w("h1[innerText=Men\u00fc]"),w("div[className=settings]",null,[w("button",{innerText:"Oberfl\u00e4chen: "+(a.B?"Texturiert":"Einfarbig"),onclick:fa(g=>{b(2,{B:!g})},[a.B])}),w("label[innerText=Aufl\u00f6sung:]",null,[w("input[type=range][min=1][max=100][step=1]",{value:101-a.A,onchange:v(g=>b(2,{A:101-Number(g.target.value)}))})]),w("label[innerText=Blickwinkel:]",null,[w("input[type=range][min=1][max=180][step=1]",{value:a.M,onchange:v(g=>
b(2,{M:Number(g.target.value)}))})]),w("label[innerText=Sichtweite:]",null,[w("input[type=range][min=1][max=128][step=1]",{value:a.J,onchange:v(g=>b(2,{J:Number(g.target.value)}))})])]),w("div",null,[w("button[innerText=Zur\u00fcck]",{onclick:v(()=>{d.l=d.U=!1})})])]}
const Ga=[0,7960953,5420927,3757176,8553090,5077911,4539717,31E5,2261551,8424632,14145495],Ha="WEBTSN".split(""),Ja=()=>{const a={v:Ia(),qa:8,ra:32,sa:8};for(var b=0;16>b;b+=2)a.v[1024+(b<<4)]=3,a.v[1024+b]=3;["X   XXX XXX XXX","X     X X X   X","X   XXX XXX XXX","X     X X     X","XXX XXX X   XXX"].forEach((d,g,e)=>{g=e.length-g;d.split("").forEach((h,c)=>{"X"===h&&(a.v[1024+(c+1<<4)+g]=6)})});for(b=0;b<Ga.length;++b)a.v[(b<<4)+1287]=b;return a},U=(a,b,d,g)=>0>d||64<=d?0:a.v[(d<<8)+(b<<4)+g],Ia=
()=>{const a=new Uint8Array(16384),b=[6,3,3,3,2];for(let d=-1,g=0;g<b.length;++g){const e=b[g];for(let h=0;16>h;++h)for(let c=0;16>c;++c)a[++d]=e}return a};let V=null,W=new Image;W.onload=()=>{var a=document.createElement("canvas");const b=a.width=W.width,d=a.height=W.height;a=a.getContext("2d");a.drawImage(W,0,0);W=V=new Uint32Array(a.getImageData(0,0,b,d).data.buffer)};W.src="data:image/png;base64,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";
const La=(a,b)=>{const d={canvas:b,ha:null,ia:null,ja:"",T:!1,ka:0,ca:0,na:setInterval(()=>{d.ka=d.ca;d.ca=0},1E3),m:a};Ka(d);return d},Ka=a=>{var b=a.canvas.width=a.m.Y,d=a.canvas.height=a.m.Z;a=(a.ia=(a.ha=a.canvas.getContext("2d")).createImageData(b,d)).data;b=a.length;for(d=3;d<b;d+=4)a[d]=255},Ma=()=>({i:null,P:!1,U:!1,l:!1,da:0,g:{K:0,N:0,L:0,u:0,aa:0,O:0,o:0,h:-1,s:0,la:9,V:0,W:10,X:0,D:0,G:0,H:0},j:null,ea:1,fa:1,Y:0,Z:0,ma:null,time:0,ga:0,$:Ja()}),Oa=(a,b)=>{onmousemove=d=>{a.l||(a.g.u=
2*(d.clientX/a.ea-.5)*F,a.g.aa=(.5-d.clientY/a.fa)*F)};onmousedown=onmouseup=d=>a.l||(Na(a,-1-d.button,"mousedown"===d.type),d.preventDefault(),!1);a.j=La(a,b);a.ma=setInterval(()=>{a.l||(a.time=(a.time+1)%24E3,a.ga=1/24E3*(a.time+6E3)%1)},50)},Na=(a,b,d)=>{if(d)switch(b){case -1:0<=a.g.h&&(a.$.v[(a.g.h<<8)+(a.g.o<<4)+a.g.s]=0);break;case -2:case 71:0<=a.g.h&&(a.g.la=U(a.$,a.g.o,a.g.h,a.g.s));break;case -3:if(0<=a.g.h){b=a.g.o;d=a.g.h;let g=a.g.s;switch(a.g.O){case 0:--b;break;case 1:++b;break;case 2:--d;
break;case 3:++d;break;case 4:--g;break;default:++g}0<=d&&64>d&&(a.$.v[(d<<8)+((b&15)<<4)+(g&15)]=a.g.la)}break;case 27:a.l=a.U=!a.U;break;case 16:a.g.N=-.1;break;case 32:a.g.N=.1;break;case 65:a.g.K=-.1;break;case 68:a.g.K=.1;break;case 80:a.l=!a.l;break;case 83:a.g.L=-.1;break;case 87:a.g.L=.1;break;case 114:a.P=!a.P;break;default:return!0}else switch(b){case 16:case 32:a.g.N=0;break;case 65:case 68:a.g.K=0;break;case 83:case 87:a.g.L=0;break;default:return!0}return!1};
function Pa({i:a,ba:b,oa:d}){const g=ha("div[className=game]"),e=ia(Ma);q(()=>(d.m=e,()=>{onmousemove=onmousedown=onmouseup=null;clearInterval(e.ma);clearInterval(e.j.na);return d.m=null}));q(()=>{e.i=a;e.j&&(e.j.T=!0)},[a]);q((h,c)=>{e.ea=O(1,h);e.fa=O(1,c);c=e.i.A;h=O(1,oa(e.ea/c));c=O(1,oa(e.fa/c));if(h!==e.Y||c!==e.Z)e.Y=h,e.Z=c,e.j&&(e.j.T=!0,Ka(e.j))},[g.offsetWidth,g.offsetHeight,a.A]);q(h=>{if(e.da&&!e.l){var c=e.g,p=pa(5,.01*(h-e.da));c.D-=.1*c.D*p;c.G-=.1*c.G*p;c.H-=.1*c.H*p;c.D+=(P(c.u)*
c.K+T(c.u)*c.L)*p;c.G+=c.N*p;c.H+=(-T(c.u)*c.K+P(c.u)*c.L)*p;c.V+=c.D*p;c.W+=c.G*p;c.X+=c.H*p}if(e.j){c=e.j;++c.ca;p=c.ia;const r=c.m,G=r.i,f=r.g,u=r.Y,x=r.Z,qa=r.$;if(!r.l||c.T){c.T=!1;const A=p.data,Qa=G.J;var H=f.u,I=f.aa;const Ra=f.o,Sa=f.h,Ta=f.s,Ua=G.B&&null!==V,ra=1/u,sa=1/x,X=u>>1,Y=x>>1,ta=P(H);H=T(H);const ua=P(-I);I=T(-I);var B=G.M/45;const Va=u<x?B*u*sa:B;B=x<u?B*x*ra:B;const va=f.V+65536,wa=f.W+65536,xa=f.X+65536,Wa=va%1,Xa=wa%1,Ya=xa%1;let y=f.o=f.s=f.O=0;f.h=-1;for(let Q=0;Q<x;++Q){var J=
(Y-Q)*sa*B;const ya=J*ua-I;J=J*I+ua;for(let R=0;R<u;++R){var K=(R-X)*ra*Va;const za=J*H+K*ta;K=J*ta-K*H;let L=16757124,S=1,Aa=Qa;for(let k=0;3>k;++k){let t=K;0===k&&(t=za);1===k&&(t=ya);const C=1/(0>t?-t:t),Z=za*C,aa=ya*C,ba=K*C;var m=Ya;0===k&&(m=Wa);1===k&&(m=Xa);0<t&&(m=1-m);let D=va+Z*m,M=wa+aa*m,E=xa+ba*m;m*=C;0===k&&(D+=.5-(0>t|0));1===k&&(M+=.5-(0>t|0));2===k&&(E+=.5-(0>t|0));let ca,da,ea;for(var n;m<Aa;)if(0===(n=U(qa,ca=D&15,da=M&65535,ea=E&15)))D+=Z,M+=aa,E+=ba,m+=C;else{if(Ua)if(--n,1===
k?6===n?n=11:1===n&&0<t&&(n=2):1===n&&(n=10),n=V[(n<<8)+((16*(1===k?E:M)&15)<<4)+(16*(1===k?D:D+E)&15)],0!==n>>>24)L=n&16777215;else{D+=Z;M+=aa;E+=ba;m+=C;continue}else L=Ga[n];Aa=m;S=1-(k+2)%3*.2+(da!==Sa||ca!==Ra||ea!==Ta?0:.1);Q===Y&&R===X&&5>=m&&(f.o=ca,f.h=da,f.s=ea,f.O=0>t|k<<1);break}}A[y]=(L&255)*S;A[++y]=(L>>8&255)*S;A[++y]=(L>>16)*S;y+=2}}A[y=u*Y+X<<2]*=2;A[++y]*=2;A[++y]*=2;c.ha.putImageData(p,0,0)}c.ja=r.P?"Minicraft 0.1.15 "+N(c.ka).toString().padStart(2,"\u00a0")+" fps, T: "+N(24*r.ga).toString().padStart(2,
"0")+":"+N(24*r.ga%1*60).toString().padStart(2,"0")+"; "+(r.l&&500>h%1E3?"":r.time)+"\nR: "+u+"x"+x+" (x"+G.A+"), C: 1, D: "+G.J+"\nE: 0/0\n\nPosition: "+f.V.toFixed(2)+" "+f.W.toFixed(2)+" "+f.X.toFixed(2)+"\nAngle: "+(f.u*na).toFixed(2)+" "+(f.aa*na).toFixed(2)+"\nBlock: "+(0>f.h?0:f.o+" "+f.h+" "+f.s+" "+Ha[f.O]+": "+U(qa,f.o,f.h,f.s))+"\nChunk: 0 0":""}e.da=h},[ma()]);ka();return[w("canvas",{R:v(h=>Oa(e,h))}),e.j&&e.P&&w("div[className=diagnostics]",{innerText:e.j.ja}),e.U&&la(Fa,{i:a,ba:b,m:e})]}
l.init(()=>{const [a,b]=ja(Ea),d=v({m:null});q(()=>{onbeforeunload=()=>{b(1)}});const g=v(e=>!d.m||Na(d.m,e.keyCode,"keydown"===e.type)||(e.preventDefault(),!1));return[{onkeydown:g,onkeyup:g,oncontextmenu:Da,pa:Da},[la(Pa,{i:a.i,ba:b,oa:d})]]});
