const w=lui,x=w.hook_dom,A=w.hook_effect,aa=w.hook_memo,ba=w.hook_model,ca=w.hook_rerender,C=w.hook_static,F=w.node,H=w.node_dom,da=w.node_map,ea=w.now,ma=window,na=document,J=Math,K=J.PI,oa=.5*K,pa=180/K,L=J.floor,va=J.ceil,wa=J.round,xa=J.min,O=J.max,ya=J.cos,za=J.sin,Aa=J.sqrt,Ba=String.fromCharCode,Ca=JSON,Ha=localStorage,Ia=Uint8Array,Ja=Uint32Array,Ka=Map,La=Number,Ma=setTimeout,Na=setInterval,Oa=clearTimeout,Pa=clearInterval,P=a=>a*a,Qa=()=>!1,Ra=({I:{Qa:a,time:c,value:g},Ga:b})=>(x(a?"div[className=minor]":
"div",{innerText:g,S:{opacity:xa(1,1-.001*(b-c-4500))}}),null);function Sa({G:a,Ga:c}){x("div[className=messages]");const g=c-5E3;return[da(Ra,a.slice(-10).filter(b=>b.time>g),{Ga:c})]}
const Ta=[0,8487297,4305266,4349313,8092539,5342114,7039851,3561583,4172910,6384533,15526888,10671324,8092798,16447200,4151672,1970708,8092539,9686227,9126695,15198183,5567485,14541182,7920469,662956,14936813],Ua=Ta.length,Va="WEBTSN".split(""),Wa=(a,c,g)=>{a.H=(a.H+c+100*K)%(2*K);a.ga=O(-oa,xa(oa,a.ga+g))},Xa=a=>{a+=32;33<a&&39>a?a++:38<a&&44>a?a+=2:43<a&&127>a?a+=3:126<a&&55258>a?a+=37:55295<a&&(a+=8485);return Ba(a)},Ya=a=>a-(63743<a?8517:159<a?69:46<a&&130>a?35:40<a&&46>a?34:34<a&&40>a?33:32),
$a=()=>{var a=Za;const c=a.length,g=new Ka,b=r=>{q=q<<1|r&1;15===++n&&(k+=Xa(q),q=n=0)},e=()=>{for(let r=0;r<m;++r)b(0)},h=r=>{b(r);b(r>>1);b(r>>2);b(r>>3);b(r>>4);b(r>>5);b(r>>6);b(r>>7)},l=()=>{0===--u&&(u=1<<m++)},f=()=>{if(y)y=!1;else{let r=t.id;for(let G=0;G<m;G++)b(r>>G)}};let d=a[0],k="",q=0,n=2,m=2,u=2,v=2,t={id:v++,ja:new Ka},y=!0;h(d);g.set(d,t);for(let r=1;r<c;++r){const G=t.ja.get(d=a[r]);G?t=G:(f(),g.has(d)||(l(),e(),h(d),g.set(d,{id:v++,ja:new Ka}),y=!0),t.ja.set(d,{id:v++,ja:new Ka}),
t=g.get(d),l())}f();g.has(d)||(l(),e(),h(d));l();b(1);--m;e();return k+=Xa(q<<15-n)},ab=a=>{var c=Za;if(!a)return null;const g=a.length,b=()=>{n+=(v>>--t&1)<<m++;0===t&&(t=15,v=Ya(a.charCodeAt(u++)))};let e=[0,1],h=1,l=3,f=2,d=null;var k=null;let q=0,n=0;k=2;let m=0,u=0,v=Ya(a.charCodeAt(u++)),t=15;for(;m<k;)b();if(1===n)return null;for(n=m=0;8>m;)b();d=[n];e[2]=d;for(c[q++]=n;u<=g;){k=f;for(n=m=0;m<k;)b();if(0===n){for(n=m=0;8>m;)b();e[l]=[n];n=l++;0===--h&&(h=1<<f++)}else if(1===n)return c;k=n<
e.length?e[n]:d.concat(d[0]);for(let y=0;y<k.length;y++)c[q++]=k[y];e[l++]=d.concat(k[0]);d=k;0===--h&&(h=1<<f++)}return null},Q=new Ja(1024),Za=new Ia(Q.buffer),bb=new Ka,cb=(a,c,g,b,e)=>{const h=a.s;a.K[(c<<h+4|b)<<6|g]=e;a.L[(c>>4<<h|b>>4)<<2|g>>4].U=!0},qb=(a,c,g)=>{const b=O(xa(c.v,63),0)>>4,e=L(c.u)>>4;c=L(c.A)>>4;if(g||a.oa!==b||a.ca+a.na!==e||a.da+a.pa!==c)g=1<<a.s,a.oa=b,a.ca=e-(a.na=(65536+e)%g),a.da=c-(a.pa=(65536+c)%g),db(a);pb(a)},db=a=>{const c=a.na,g=a.oa,b=a.pa,e=a.s,h=`${e} ${c} ${b} ${g}`;
let l=bb.get(h);if(null==l){const f=1<<e,d=P(.5*f);bb.set(h,l=a.L.map(({x:k,y:q,z:n},m)=>{let u=P(k-c),v=P(n-b),t=P(k-c-f),y=0,r=0;t<u&&(u=t,y=-f);(t=P(k-c+f))<u&&(u=t,y=f);(t=P(n-b-f))<v&&(v=t,r=-f);(t=P(n-b+f))<v&&(v=t,r=f);return{ya:u+v+P(q-g),Ka:m,ca:y,da:r}}).filter(({ya:k})=>k<=d).sort((k,q)=>k.ya-q.ya))}a.ka=l;a.aa=0},sb=a=>{for(const c of a.L)c.U&&rb(a,c)},tb=(a,c,g,b)=>`minicraft.world.${a.id}:${c}/${g}`+(0<b?"/"+b:""),rb=(a,c)=>{const g=a.ia;var b=a.s;const e=c.y,h=(256<<b)-256;for(let l=
0,f=-1,d=((c.x<<b+4|c.z)<<6|e)<<2;16>l;++l){for(b=0;16>b;++b)Q[++f]=g[d],Q[++f]=g[++d],Q[++f]=g[++d],Q[++f]=g[++d],d+=13;d+=h}Ha.setItem(tb(a,c.fa,c.ta,e),$a());c.U=!1},pb=a=>{var c=a.L,g=a.ka,b=a.ca;const e=a.da,h=g.length;for(;a.aa<h;){var l=g[a.aa++];const m=c[l.Ka];var f=m.loaded,d=m.x,k=m.y,q=m.z;const u=b+l.ca+d;l=e+l.da+q;if(!f||u!==m.fa||l!==m.ta){m.U&&rb(a,m);m.loaded=!0;var n=ab(Ha.getItem(tb(a,m.fa=u,m.ta=l,k)));if(f||0===k||n){c=a.ia;b=a.s;g=(256<<b)-256;d=((d<<b+4|q)<<6|k)<<2;if(n)for(let v=
0,t=-1;16>v;++v){for(f=0;16>f;++f)c[d]=Q[++t],c[++d]=Q[++t],c[++d]=Q[++t],c[++d]=Q[++t],d+=13;d+=g}else for(q=0;16>q;++q){for(n=0;16>n;++n)c[d]=0<k?0:50397446,c[++d]=0<k?0:131843,f?(c[++d]=0,c[++d]=0,d+=13):d+=15;d+=g}if(0===(u|l|k)){for(k=1;k<Ua;++k)cb(a,k%9,7,L(k/9),k);m.U=!1}break}}}};let ub=null,vb=new Image;vb.crossOrigin="anonymous";vb.onload=()=>{var a=na.createElement("canvas");a.width=256;a.height=26;a=a.getContext("2d");a.drawImage(vb,0,0);vb=null;ub=new Ja(a.getImageData(0,0,256,26).data.buffer)};
vb.src=ASSETS+"blocks.png";const xb=(a,c)=>{const g={Ia:c,wa:c.getContext("2d",{alpha:!1,desynchronized:!0}),Ja:null,Na:"",M:!1,Oa:0,za:0,Ya:Na(()=>(g.Oa=g.za,g.za=0),1E3),h:a};wb(g);return g},wb=a=>{(a.Ja=a.wa.createImageData(a.Ia.width=a.h.ra,a.Ia.height=a.h.sa)).data.fill(255);a.wa.fillStyle="rgba(255,255,255,.5)"};let yb=0;
const zb=()=>{const a={K:null,ia:null,L:null,ka:null,aa:0,na:0,oa:0,pa:0,id:0,ca:0,da:0,s:0,Ta:.5,Ua:8.5,Va:.5};return{actions:null,l:null,la:!1,g:!0,ma:!1,Pa:null,Aa:0,B:new Set,Ca:"",i:0,G:[],j:{ua:0,Ha:0,va:0,H:0,ga:0,ha:0,P:0,J:-1,T:0,Z:null,$:null,Ba:9,qa:0,name:"Gast",u:a.Ta,v:a.Ua,A:a.Va,Ra:0,Sa:0,W:0,X:0,Y:0},o:null,Da:1,Ea:1,ra:0,sa:0,Wa:null,time:0,Fa:0,m:a}},Ab=(a,c)=>{a.o=xb(a,c);a.Wa=Na(()=>{a.g||(a.time=(a.time+1)%24E3,a.Fa=1/24E3*(a.time+6E3)%1,qb(a.m,a.j,!1))},50)},Y=(a,c)=>a===c?
0:.1-.2*a,Bb=a=>{a.j.ua=Y((a=a.B).has(-12)||a.has(65),a.has(-13)||a.has(68))},Cb=a=>{a.j.Ha=Y((a=a.B).has(-15)||a.has(16),a.has(-14)||a.has(32))},Db=a=>{a.j.va=Y((a=a.B).has(-11)||a.has(83),a.has(-10)||a.has(87))},Fb=(a,c,g)=>{const b=a.B,e=a.j;if(g){if(b.has(c))return!1;b.add(c);const l=e.P;var h=e.J;g=e.T;switch(c){case -18:case -19:a.j.Ra=Y(a.B.has(-18),a.B.has(-19));break;case -17:case -16:a.j.Sa=Y(a.B.has(-17),a.B.has(-16));break;case -1:0<=h&&(0===e.qa?cb(a.m,l,h,g,0):Eb(a,[l,h,g],!1));break;
case -2:case 71:0<=h&&(c=a.m,e.Ba=0>h||63<h?0:c.K[(l<<c.s+4|g)<<6|h]);break;case -3:if(0<=h)if(0===e.qa){c=l;switch(e.ha){case 0:--c;break;case 1:++c;break;case 2:--h;break;case 3:++h;break;case 4:--g;break;default:++g}0<=h&&64>h&&cb(a.m,c&(1<<4+a.m.s)-1,h,g&(1<<4+a.m.s)-1,e.Ba)}else Eb(a,[l,h,g],!0);break;case 27:a.i?(a.g=!1,a.i=0):(a.g=!0,a.i=1);break;case -15:case -14:case 16:case 32:Cb(a);break;case -12:case -13:case 65:case 68:Bb(a);break;case 80:a.g=!a.g;break;case -11:case -10:case 83:case 87:Db(a);
break;case 84:if(!a.i){a.i=2;for(const f of b)Fb(a,f,!1)}break;case 114:a.la=!a.la;break;default:return!1}}else{if(!b.delete(c))return!1;switch(c){case -15:case -14:case 16:case 32:Cb(a);break;case -12:case -13:case 65:case 68:Bb(a);break;case -11:case -10:case 83:case 87:Db(a);break;case -18:case -19:a.j.Ra=Y(a.B.has(-18),a.B.has(-19));break;case -17:case -16:a.j.Sa=Y(a.B.has(-17),a.B.has(-16))}}a.Ca=[...b].join();return!0},Gb=(a,c)=>(c=c.startsWith("~")?a+La(c.substr(1)):La(c),isNaN(c)?a:c),Z=(a,
c,g=!1)=>{(a.G=a.G.slice(-49)).push({id:++yb,Qa:g,time:ea(),value:c})},Eb=(a,c,g)=>{g?a.j.$=c:a.j.Z=c;Z(a,`${g?"second":"first"} position: ${c.join(" ")}`,!0)};
function Hb({actions:{Xa:a,xa:c,Ma:g},l:b,h:e}){A(()=>{sb(e.m);return c});A(()=>{const h=Ma(c,1E3);return()=>Oa(h)},[b]);x("div[className=menu]");return[H("h1[innerText=Men\u00fc]"),H("div[className=settings]",null,[H("button",{innerText:"Oberfl\u00e4chen: "+(b.V?"Texturiert":"Einfarbig"),onclick:C(()=>a(h=>({V:!h.V})))}),H("label[innerText=Aufl\u00f6sung:]",null,[H("input[type=range][min=1][max=100][step=1]",{value:101-b.N,onchange:C(h=>g({N:101-Number(h.target.value)}))})]),H("label[innerText=Blickwinkel:]",
null,[H("input[type=range][min=1][max=180][step=1]",{value:b.ea,onchange:C(h=>g({ea:Number(h.target.value)}))})]),H("label[innerText=Sichtweite:]",null,[H("input[type=range][min=1][max=128][step=1]",{value:b.O,onchange:C(h=>g({O:Number(h.target.value)}))})]),H("label[innerText=Mausempfindlichkeit:]",null,[H("input[type=range][min=1][max=15][step=1]",{value:b.ba,onchange:C(h=>g({ba:Number(h.target.value)}))})])]),H("center",null,[H("button[innerText=Zur\u00fcck]",{onclick:C(h=>(e.i=0,"mouse"===h.pointerType?
e.Pa.requestPointerLock():e.g=!1))})])]}const Ib=({I:{Qa:a,value:c}})=>(x(a?"div[className=minor]":"div",{innerText:c}),null);
function Jb({h:a,G:c}){x("div[className=menu terminal]");const g=C({history:null});A(b=>{b&&Ma(()=>g.history.scrollTop=1E9,0)},[c.length&&c[c.length-1].id]);return[H("div[className=history]",{R:C(b=>{g.history=b})},[da(Ib,c)]),H("input[enterkeyhint=send][mozactionhint=send][name=message][required]",C({onkeydown:b=>{var e=b.keyCode;b=b.target;if(13===e){var h=b.value;e=a.j;if(h)if("/"===h.charAt(0)){h=h.substr(1).split(" ");var l=h.shift();switch(l){case "clear":a.G=[];break;case "exit":a.g=!1;a.i=
0;break;case "give":h=La(h[0]);!isNaN(h)&&0<h&&25>h&&0===h%1?(e.Ba=h,Z(a,"selected block "+h,!0)):Z(a,"invalid block type");break;case "help":Z(a,"commands: clear, exit, give, help, save, spawn, tp, version, /regen");break;case "me":Z(a,e.name+" "+h.join(" "),!0);break;case "save":sb(a.m);a.actions.xa();Z(a,"world+config saved",!0);break;case "smart":e.name="LFF5644";Z(a,"lff.smart: true",!0);break;case "spawn":e.u=a.m.Ta;e.v=a.m.Ua;e.A=a.m.Va;a.o.M=!0;break;case "teleport":case "tp":3===h.length?
(Z(a,`teleported to ${e.u=Gb(e.u,h[0])} ${e.v=Gb(e.v,h[1])} ${e.A=Gb(e.A,h[2])}`,!0),a.o.M=!0):Z(a,"PITCH");break;case "version":Z(a,"Minicraft 0.5.11");break;case "/exit":e.qa=0;Z(a,"normal mouse mode",!0);break;case "/expand":a.j.Z&&a.j.$?l=!0:(Z(a,"selection required"),l=!1);l&&("vert"===h[0]?(e.Z[1]=0,e.$[1]=63,Z(a,"selection expanded",!0)):Z(a,"only vert supported"));break;case "/pos1":case "/pos2":Eb(a,[L(e.u),L(e.v),L(e.A)],"/pos2"===l);break;case "/regen":e=a.m;h=e.L[e.ka[e.aa=0].Ka];Ha.removeItem(tb(e,
h.fa,h.ta,h.y));h.U=!1;++h.fa;pb(e);Z(a,"regenerate chunk",!0);a.o.M=!0;break;case "/show":Z(a,`first: ${e.Z?e.Z.join(" "):"none"}, second: ${e.$?e.$.join(" "):"none"}`);break;case "/wand":e.qa=1;Z(a,"primary+secondary button for selection",!0);break;default:Z(a,"unknown command: "+l)}}else Z(a,`<${e.name}> `+h);b.value=""}else 27===e&&(a.g=!1,a.i=0)},R:b=>Ma(()=>b.focus(),0)}))]}
const Kb=[["pick",-2],["up",-14],["down",-15],["T",84],["F3",114],["...",27]],Lb=[["up",-10],["down",-11],["left",-12],["right",-13],["center",-1]],Mb=[["up",-16],["down",-17],["left",-18],["right",-19],["center",-3]];
function Nb({h:a}){const c=a.B,g=([b,e])=>H("div",{D:{code:e},F:{button:!0,[b]:!0,active:c.has(e)}});x("div[className=touch]",C({ontouchstart:b=>{b.preventDefault();const e=Number(b.target.dataset.code);if(null!=e&&Fb(a,e,!0)){const h=b.changedTouches[0].identifier,l=f=>{f.changedTouches[0].identifier===h&&(removeEventListener("touchend",l),Fb(a,e,!1))};addEventListener("touchend",l)}}}));return[H("div[className=top]",null,Kb.map(([b,e])=>H(`div[innerText=${b}]`,{D:{code:e},F:{button:!0,active:c.has(e)}}))),
H("div[className=move]",null,Lb.map(g)),H("div[className=move sec]",null,Mb.map(g))]}
function Ob({actions:a,l:c,Za:g}){const b=aa(zb),e=ea(),h=x("div[className=game]",aa(()=>{const f=d=>0!==b.i||(b.ma=!1,na.pointerLockElement===h?b.g||Fb(b,-1-d.button,"mousedown"===d.type):b.Pa.requestPointerLock(),d.preventDefault(),!1);return{onmousedown:f,onmousemove:d=>{if(!b.g&&!b.i){const k=b.l.ba*K/O(b.Da,b.Ea);Wa(b.j,d.movementX*k,-d.movementY*k)}},onmouseup:f,ontouchstart:d=>{b.ma=!0;b.i||(b.g=!1,d.preventDefault())}}})),l=na.pointerLockElement===h;A(()=>(b.actions=a,b.Pa=h,g.h=b,()=>{Pa(b.Wa);
Pa(b.o.Ya);return g.h=null}));A(()=>{b.l=c;b.o&&(b.o.M=!0);const f=b.j,d=b.m;var k=b.l.O;k=17>k?2:49>k?3:113>k?4:241>k?5:497>k?6:1009>k?7:2033>k?8:4081>k?9:8177>k?10:16369>k?11:32753>k?12:13;if(d.s!==k){d.L&&sb(d);const q=1<<(d.s=k),n=d.L=[];for(let m=0;m<q;++m)for(let u=0;u<q;++u)for(let v=0;4>v;++v)n.push({U:!1,loaded:!1,x:m,y:v,z:u,fa:0,ta:0});k=q<<k+12+2;null===d.K||d.K.length<k?d.ia=new Ja((d.K=new Ia(k)).buffer):d.ia.fill(0);qb(d,f,!0)}},[c]);A((f,d,k)=>{b.Da=O(1,f*k);b.Ea=O(1,d*k);d=b.l.N;
f=O(1,wa(b.Da/d));d=O(1,wa(b.Ea/d));if(f!==b.ra||d!==b.sa)b.ra=f,b.sa=d,b.o&&(b.o.M=!0,wb(b.o))},[h.offsetWidth,h.offsetHeight,ma.devicePixelRatio||1,c.N]);A(()=>{l||b.g||b.i||(b.i=1);b.g=!l},[l]);A(f=>l&&f&&na.exitPointerLock(),[b.g||b.i]);A(()=>{if(b.Aa&&!b.g){var f=b.j,d=xa(5,.01*(e-b.Aa));f.W-=.1*f.W*d;f.X-=.1*f.X*d;f.Y-=.1*f.Y*d;f.W+=(ya(f.H)*f.ua+za(f.H)*f.va)*d;f.X+=f.Ha*d;f.Y+=(-za(f.H)*f.ua+ya(f.H)*f.va)*d;Wa(f,f.Ra*d,f.Sa*d);f.u+=f.W*d;f.v+=f.X*d;f.A+=f.Y*d}if(b.o){f=b.o;++f.za;var k=f.wa,
q=f.Ja;d=f.h;const fa=d.l,p=d.j,M=d.ra,N=d.sa,I=d.m;if(!d.g||f.M){f.M=!1;const U=q.data,Qb=fa.O;var n=p.H,m=p.ga;const Rb=p.P,Sb=p.J,Tb=p.T;var u=p.u,v=p.v,t=p.A;const Ub=I.K;var y=I.s;const Vb=fa.V&&null!==ub;var r=1/M,G=1/N;const V=M>>1,W=N>>1,eb=xa(M,N),fb=32<eb,gb=ya(n);n=za(n);const hb=ya(-m);m=za(-m);var X=fa.ea/45;const Wb=r*(M<N?X*M*G:X);r=G*(N<M?X*N*r:X);u+=65536;v+=65536;t+=65536;G=u%1;X=v%1;const Xb=t%1;y=4+y;const ib=(1<<y)-1;let jb=5,R=p.P=p.T=p.ha=0;p.J=-1;for(let qa=0;qa<N;++qa){var ra=
(W-qa)*r;const kb=ra*hb-m;var Da=ra*m+hb;ra=Da*n;Da*=gb;for(let sa=0;sa<M;++sa){var ha=(sa-V)*Wb;const lb=ra+gb*ha;ha=Da-n*ha;let ia=16757124,ta=1,mb=Qb;for(let z=0;3>z;++z){let D=ha;0===z&&(D=lb);1===z&&(D=kb);var S=1/(0>D?-D:D);const ua=lb*S,T=kb*S;S*=ha;const nb=Aa(ua*ua+T*T+S*S);var B=Xb;0===z&&(B=G);1===z&&(B=X);0<D&&(B=1-B);let ja=u+ua*B-(0===z&0>D|0),ka=v+T*B-(1===z&0>D|0),la=t+S*B-(2===z&0>D|0);B*=nb;for(let Ea,Fa,Ga,E;B<mb;ja+=ua,ka+=T,la+=S,B+=nb)if(65536>ka){if(0>T)break}else if(65600<=
ka){if(0<T)break}else if(0!==(E=Ub[((Ea=ja&ib)<<y|(Ga=la&ib))<<6|(Fa=ka&63)])){qa===W&&sa===V&&B<=jb&&(p.P=Ea,p.J=Fa,p.T=Ga,p.ha=0>D|z<<1,jb=B);if(Vb){--E;1===z?6===E?E=25:13===E?E=4:1===E&&0<T&&(E=2):1===E&&(E=24);const ob=ub[E<<8|(16*(1===z?la:ka)&15)<<4|16*(1===z?ja:(0<D?ja-la:la-ja)+65536)&15];if(0===ob>>>24)continue;ia=ob&16777215}else ia=Ta[E];mb=B;ta=(0===z?.8:2===z?.6:0<D?.4:1)+(Fa!==Sb||Ea!==Rb||Ga!==Tb?0:.2);break}}U[R]=(ia&255)*ta;U[++R]=(ia>>8&255)*ta;U[++R]=(ia>>16)*ta;R+=2}}fb||(U[R=
M*W+V<<2]+=128,U[++R]+=128,U[++R]+=128);k.putImageData(q,0,0);fb&&(q=va(.05*eb),k.fillRect(V-q,W-1,q<<1,2),k.fillRect(V-1,W-q,2,q-1),k.fillRect(V-1,W+1,2,q-1))}d.la?(0>p.J?k=0:(k=p.J,k=p.P+" "+p.J+" "+p.T+" "+Va[p.ha]+": "+(0>k||63<k?0:I.K[(p.P<<I.s+4|p.T)<<6|k])),d="Minicraft 0.5.11 "+L(f.Oa).toString().padStart(2,"\u00a0")+" fps, T: "+L(24*d.Fa).toString().padStart(2,"0")+":"+L(24*d.Fa%1*60).toString().padStart(2,"0")+"; "+(d.g&&500>e%1E3?"":d.time)+"\nR: "+M+"x"+N+" (x"+fa.N+"), D: "+fa.O+", C: "+
I.aa+"/"+I.ka.length+", M: "+(64*P(1<<4+I.s)>>10)+"k\nE: 0/0\n\nPosition: "+p.u.toFixed(2)+" "+p.v.toFixed(2)+" "+p.A.toFixed(2)+"\nAngle: "+(p.H*pa).toFixed(2)+" "+(p.ga*pa).toFixed(2)+"\nBlock: "+k+"\nChunk abs: "+(L(p.u)>>4)+" "+(L(p.A)>>4)+" "+(L(p.v)>>4)+" rel: "+I.na+" "+I.pa+" "+I.oa):d="";f.Na=d}b.Aa=e},[e]);ca();return[H("canvas",{R:C(f=>Ab(b,f))}),2!==b.i&&F(Sa,{G:b.G,Ga:e}),b.o&&b.la&&H("div[className=diagnostics]",{innerText:b.o.Na}),b.ma&&F(Nb,{h:b,Ca:b.Ca}),1===b.i&&F(Hb,{actions:a,
l:c,h:b}),2===b.i&&F(Jb,{h:b,G:b.G})]}
const Pb={init:()=>{const a={V:!0,ba:3,N:10,ea:80,O:64};var c=Ha.getItem("minicraft.config");if(c){c=Ca.parse(c);let g=c.flag_textures;null!=g&&(a.V=g);null!=(g=c.mouse_sensitivity)&&(a.ba=g);a.N=c.resolution_scaling;a.ea=c.view_angle;a.O=c.view_distance}return{l:a,La:a}},xa:a=>{const c=a.l;if(c===a.La)return a;Ha.setItem("minicraft.config",Ca.stringify({version:"0.5.11",flag_textures:c.V,mouse_sensitivity:c.ba,resolution_scaling:c.N,view_angle:c.ea,view_distance:c.O}));return Object.assign({},a,
{La:c})},Xa:(a,c)=>Pb.Ma(a,c(a.l)),Ma:(a,c)=>Object.assign({},a,{l:Object.assign({},a.l,c)})};w.init(()=>{const [a,c]=ba(Pb),g=C({h:null});A(()=>{let e=!1;onbeforeunload=onunload=()=>{e||(e=!0,c.xa(),g.h&&sb(g.h.m))}});const b=C(e=>"INPUT"===e.target.tagName||!g.h||(e.preventDefault(),Fb(g.h,e.keyCode,"keydown"===e.type),g.h.ma=!1));return[{onkeydown:b,onkeyup:b,oncontextmenu:Qa,ondragstart:Qa},[F(Ob,{actions:c,l:a.l,Za:g})]]});
