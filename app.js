const l=lui,n=l.hook_dom,q=l.hook_effect,ja=l.hook_memo,ka=l.hook_rerender,r=l.hook_static,D=l.node,E=l.node_dom,la=l.now,F=Math,G=F.PI,J=180/G,K=F.floor,L=F.round,ma=F.min,Q=F.max,R=F.cos,S=F.sin,na=[0,7960953,8370002,7885881,8553090,9927501,4539717,6311215,3113506,12094592,14145495],pa=()=>{const a={K:oa(),ka:8,la:32,ma:8};for(let e=0;16>e;e+=2)a.K[T(e,4,0)]=3,a.K[T(0,4,e)]=3;["X   XXX XXX XXX","X     X X X   X","X   XXX XXX XXX","X     X X     X","XXX XXX X   XXX"].forEach((e,b,d)=>{b=d.length-
b;e.split("").forEach((c,g)=>{"X"===c&&(a.K[T(g+1,4,b)]=6)})});return a},T=(a,e,b)=>((e|0)<<8)+((a-(0>a)&15)<<4)+(b-(0>b)&15),oa=()=>{const a=new Uint8Array(16384),e=[6,3,3,3,2];for(let b=-1,d=0;d<e.length;++d){const c=e[d];for(let g=0;16>g;++g)for(let f=0;16>f;++f)a[++b]=c}return a},qa=(a,e)=>{const b={canvas:e,$:null,aa:null,ba:"",B:!1,ca:0,V:0,ea:setInterval(()=>{b.ca=b.V;b.V=0},1E3),i:a};U(b);return b},U=a=>{var e=a.canvas.width=a.i.D,b=a.canvas.height=a.i.G;a=(a.aa=(a.$=a.canvas.getContext("2d")).createImageData(e,
b)).data;e=a.length;for(b=3;b<e;b+=4)a[b]=255},ra=()=>({L:!1,M:!1,j:!1,W:0,g:{v:0,J:0,A:0,N:0,O:10,P:0,o:0,s:0,u:0,l:0,U:0},h:null,m:10,X:1,Y:1,D:0,G:0,da:null,time:0,Z:0,T:80,H:64,ga:pa()}),sa=(a,e)=>{onmousemove=b=>{a.j||(a.g.l=2*(b.clientX/a.X-.5)*G,a.g.U=(.5-b.clientY/a.Y)*G)};a.h=qa(a,e);a.da=setInterval(()=>{a.j||(a.time=(a.time+1)%24E3,a.Z=1/24E3*(a.time+6E3)%1)},50)},V=a=>{const e=Q(1,L(a.X/a.m)),b=Q(1,L(a.Y/a.m));if(e!==a.D||b!==a.G)a.D=e,a.G=b,a.h&&(a.h.B=!0,U(a.h))};
function ta({i:a}){n("div[className=menu]");return[E("h1[innerText=Men\u00fc]"),E("div[className=settings]",null,[E("label[innerText=Aufl\u00f6sung:]",null,[E("input[type=range][min=1][max=100][step=1]",{value:101-a.m,onchange:r(e=>{a.m=101-Number(e.target.value);V(a)})})]),E("label[innerText=Blickwinkel:]",null,[E("input[type=range][min=1][max=180][step=1]",{value:a.T,onchange:r(e=>{a.T=Number(e.target.value);a.h.B=!0})})]),E("label[innerText=Sichtweite:]",null,[E("input[type=range][min=1][max=128][step=1]",
{value:a.H,onchange:r(e=>{a.H=Number(e.target.value);a.h.B=!0})})])]),E("div",null,[E("button[innerText=Zur\u00fcck]",{onclick:r(()=>{a.j=a.M=!1})})])]}
function ua({fa:a}){const e=n("div[className=game]"),b=ja(ra);q(()=>(a.i=b,()=>{onmousemove=null;clearInterval(b.da);clearInterval(b.h.ea);return a.i=null}));q((d,c)=>(b.X=Q(1,d),b.Y=Q(1,c),V(b)),[e.offsetWidth,e.offsetHeight]);q(d=>{if(b.W&&!b.j){var c=b.g,g=ma(5,.01*(d-b.W));c.o-=.1*c.o*g;c.s-=.1*c.s*g;c.u-=.1*c.u*g;c.o+=(R(c.l)*c.v+S(c.l)*c.A)*g;c.s+=c.J*g;c.u+=(-S(c.l)*c.v+R(c.l)*c.A)*g;c.N+=c.o*g;c.O+=c.s*g;c.P+=c.u*g}if(b.h){c=b.h;++c.V;const W=c.aa;var f=c.i,k=f.g;const va=f.ga;c.ba=f.L?"Minicraft 0.1.8 "+
K(c.ca).toString().padStart(2,"\u00a0")+" fps, T: "+K(24*f.Z).toString().padStart(2,"0")+":"+K(24*f.Z%1*60).toString().padStart(2,"0")+"; "+(f.j&&500>d%1E3?"":f.time)+"\nR: "+f.D+"x"+f.G+" (x"+f.m+"), C: 1, D: "+f.H+"\nE: 0/0\n\nPosition: "+k.N.toFixed(2)+" "+k.O.toFixed(2)+" "+k.P.toFixed(2)+"\nAngle: "+(k.l*J).toFixed(2)+" "+(k.U*J).toFixed(2)+"\nBlock: 0 0 0\nChunk: 0 0 0 in 0 0\nFacing: 0":"";if(!f.j||c.B){c.B=!1;g=W.data;var u=f.D,v=f.G,wa=f.H,xa=.5*u,ya=.5*v,X=1/u,Y=1/v,x=k.l,y=k.U,Z=k.N,aa=
k.O;k=k.P;var ba=R(x);x=S(x);var ca=R(-y);y=S(-y);var w=f.T/45;f=u<v?w*u*Y:w;w=v<u?w*v*X:w;var H=0;for(let M=0;M<v;++M)for(let N=0;N<u;++N){var z=(N-xa)*X*f,A=(ya-M)*Y*w;const da=A*ca-y;var t=ca+A*y;A=z*ba+t*x;z=t*ba-z*x;t=8696319;let I=1,ea=wa;for(let p=0;3>p;++p){var m=0===p?A:1===p?da:z;const B=1/(0>m?-m:m),fa=A*B,ha=da*B,ia=z*B;var h=0===p?Z%1:1===p?aa%1:k%1;h=0>h?-h:h;h=0<m?1-h:h;let O=Z+fa*h,C=aa+ha*h,P=k+ia*h;h*=B;for(0===p?O+=0>m?-.5:.5:1===p?C+=0>m?-.5:.5:P+=0>m?-.5:.5;h<ea;)if(m=0>C||64<=
C?0:va.K[T(O,C,P)],0===m)O+=fa,C+=ha,P+=ia,h+=B;else{t=na[m];I=1-(p+2)%3*.2;ea=h;break}}g[H]=(t>>16&255)*I;g[++H]=(t>>8&255)*I;g[++H]=(t&255)*I;H+=2}c.$.putImageData(W,0,0)}}b.W=d},[la()]);ka();return[E("canvas",{R:r(d=>{sa(b,d)})}),b.h&&b.L&&E("div[className=diagnostics]",{innerText:b.h.ba}),b.M&&D(ta,{i:b,ha:b.m,ia:b.T,ja:b.H})]}
l.init(()=>{const a=r({i:null}),e=r(b=>{var d;if(!(d=!a.i))a:{d=a.i;var c=b.keyCode;if("keydown"===b.type)switch(c){case 27:d.j=d.M=!d.M;break;case 16:d.g.J=-.1;break;case 32:d.g.J=.1;break;case 65:d.g.v=-.1;break;case 68:d.g.v=.1;break;case 80:d.j=!d.j;break;case 83:d.g.A=-.1;break;case 87:d.g.A=.1;break;case 114:d.L=!d.L;break;default:d=!0;break a}else switch(c){case 16:case 32:d.g.J=0;break;case 65:case 68:d.g.v=0;break;case 83:case 87:d.g.A=0;break;default:d=!0;break a}d=!1}return d||(b.preventDefault(),
!1)});return[{onkeydown:e,onkeyup:e},[D(ua,{fa:a})]]});
